{"version":3,"sources":["zepto.history.js"],"names":[],"mappings":";;;;;;;;;;;;AAQA,CAAC,UAAS,MAAM,EAAC,SAAS,EAAC;AAC1B,aAAY;;;AAAC;AAGb,KACC,OAAO,GAAG,MAAM,CAAC,OAAO,GAAG,MAAM,CAAC,OAAO,IAAE,EAAE;KAC7C,KAAK,GAAG,MAAM,CAAC,KAAK;;;AAAC,AAGtB,KAAK,OAAO,OAAO,CAAC,OAAO,KAAK,WAAW,EAAG;AAC7C,QAAM,IAAI,KAAK,CAAC,+CAA+C,CAAC,CAAC;EACjE;;;AAAA,AAGD,QAAO,CAAC,OAAO,GAAG;;;;;;;;AAQjB,MAAI,EAAE,cAAS,EAAE,EAAC,KAAK,EAAC,QAAQ,EAAC;AAChC,OAAI,KAAK,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,EAAC,QAAQ,CAAC,CAAC;GACnC;;;;;;;;AAQD,SAAO,EAAE,iBAAS,EAAE,EAAC,KAAK,EAAC;AAC1B,OAAI,KAAK,CAAC,EAAE,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;GAC7B;;;;;;;;AAQD,kBAAgB,EAAE,0BAAS,GAAG,EAAC,KAAK,EAAC;;AAEpC,OAAI,MAAM,GAAG,AAAC,KAAK,IAAI,KAAK,CAAC,GAAG,CAAC,IAAK,SAAS;;;AAAC,AAGhD,UAAO,MAAM,CAAC;GACd;;;;;;;AAOD,WAAS,EAAE,mBAAS,QAAQ,EAAE;AAC7B,OAAI,KAAK,CAAC,QAAQ,CAAC,CAAC;GACpB;EACD;;;AAAC,AAGF,KAAK,OAAO,OAAO,CAAC,IAAI,KAAK,WAAW,EAAG;AAC1C,SAAO,CAAC,IAAI,EAAE,CAAC;EACf;CAED,CAAA,CAAE,MAAM,CAAC;;;;;;;;AAAC,AAQX,CAAC,UAAS,MAAM,EAAC,SAAS,EAAC;AAC1B,aAAY;;;;;;AAAC;AAMb,KACC,OAAO,GAAG,MAAM,CAAC,OAAO,IAAE,SAAS;;AACnC,SAAQ,GAAG,MAAM,CAAC,QAAQ;;AAC1B,UAAS,GAAG,MAAM,CAAC,SAAS;;AAC5B,eAAc,GAAG,MAAM,CAAC,cAAc,IAAE,KAAK;;AAC7C,WAAU,GAAG,MAAM,CAAC,UAAU;KAC9B,YAAY,GAAG,MAAM,CAAC,YAAY;KAClC,WAAW,GAAG,MAAM,CAAC,WAAW;KAChC,aAAa,GAAG,MAAM,CAAC,aAAa;KACpC,IAAI,GAAG,MAAM,CAAC,IAAI;KAClB,KAAK,GAAG,MAAM,CAAC,KAAK;KACpB,OAAO,GAAG,MAAM,CAAC,OAAO,GAAG,MAAM,CAAC,OAAO,IAAE,EAAE;;AAC7C,QAAO,GAAG,MAAM,CAAC,OAAO;;AAAC,AAE1B,KAAI;AACH,gBAAc,CAAC,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;AACpC,gBAAc,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;EAClC,CAAC,OAAM,CAAC,EAAE;AACV,gBAAc,GAAG,KAAK,CAAC;EACvB;;;AAAA,AAGD,KAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,IAAE,IAAI,CAAC,MAAM,CAAC;AAC7C,KAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,IAAE,IAAI,CAAC,MAAM;;;AAAC,AAGrC,KAAK,OAAO,OAAO,CAAC,IAAI,KAAK,WAAW,EAAG;AAC1C,QAAM,IAAI,KAAK,CAAC,4CAA4C,CAAC,CAAC;EAC9D;;;AAAA,AAGD,QAAO,CAAC,IAAI,GAAG,UAAS,OAAO,EAAC;;AAE/B,MAAK,OAAO,OAAO,CAAC,OAAO,KAAK,WAAW,EAAG;AAC7C,UAAO,KAAK,CAAC;GACb;;;AAAA,AAGD,MAAK,OAAO,OAAO,CAAC,QAAQ,KAAK,WAAW,EAAG;AAC9C,UAAO,CAAC,QAAQ,EAAE,CAAC;GACnB;;;AAAA,AAGD,MAAK,OAAO,OAAO,CAAC,SAAS,KAAK,WAAW,EAAG;AAC/C,UAAO,CAAC,SAAS,EAAE,CAAC;GACpB;;;AAAA,AAGD,SAAO,IAAI,CAAC;EACZ;;;;;;AAAC,AAOF,QAAO,CAAC,QAAQ,GAAG,UAAS,OAAO,EAAC;;AAEnC,MAAK,OAAO,OAAO,CAAC,QAAQ,CAAC,WAAW,KAAK,WAAW,EAAG;;AAE1D,UAAO,KAAK,CAAC;GACb,MACI;AACJ,UAAO,CAAC,QAAQ,CAAC,WAAW,GAAG,IAAI,CAAC;GACpC;;;;;;;;;AAAA,AAUD,SAAO,CAAC,OAAO,GAAG,OAAO,CAAC,OAAO,IAAE,EAAE;;;;;;AAAC,AAMtC,SAAO,CAAC,OAAO,CAAC,kBAAkB,GAAG,OAAO,CAAC,OAAO,CAAC,kBAAkB,IAAI,GAAG;;;;;;AAAC,AAM/E,SAAO,CAAC,OAAO,CAAC,kBAAkB,GAAG,OAAO,CAAC,OAAO,CAAC,kBAAkB,IAAI,GAAG;;;;;;AAAC,AAM/E,SAAO,CAAC,OAAO,CAAC,mBAAmB,GAAG,OAAO,CAAC,OAAO,CAAC,mBAAmB,IAAI,GAAG;;;;;;AAAC,AAMjF,SAAO,CAAC,OAAO,CAAC,WAAW,GAAG,OAAO,CAAC,OAAO,CAAC,WAAW,IAAI,KAAK;;;;;;AAAC,AAMnE,SAAO,CAAC,OAAO,CAAC,aAAa,GAAG,OAAO,CAAC,OAAO,CAAC,aAAa,IAAI,IAAI;;;;;;AAAC,AAMtE,SAAO,CAAC,OAAO,CAAC,SAAS,GAAG,OAAO,CAAC,OAAO,CAAC,SAAS,IAAI,GAAG;;;;;;AAAC,AAM7D,SAAO,CAAC,OAAO,CAAC,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,KAAK,IAAI,KAAK;;;;;;AAAC,AAMvD,SAAO,CAAC,OAAO,CAAC,YAAY,GAAG,OAAO,CAAC,OAAO,CAAC,YAAY,IAAI,QAAQ,CAAC,KAAK;;;;;;AAAC,AAM9E,SAAO,CAAC,OAAO,CAAC,SAAS,GAAG,OAAO,CAAC,OAAO,CAAC,SAAS,IAAI,KAAK;;;;;;AAAC,AAM/D,SAAO,CAAC,OAAO,CAAC,SAAS,GAAG,OAAO,CAAC,OAAO,CAAC,SAAS,IAAI,KAAK;;;;;;;;;AAAC,AAU/D,SAAO,CAAC,YAAY,GAAG,EAAE;;;;;;AAAC,AAM1B,SAAO,CAAC,iBAAiB,GAAG,YAAU;AACrC,OAAI,CAAC;OAAE,EAAE,GAAG,OAAO,CAAC,YAAY,CAAC;AACjC,OAAI,OAAO,EAAE,KAAK,WAAW,IAAI,EAAE,KAAK,IAAI,EAAE;AAC7C,SAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAC/B,kBAAa,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;KACrB;AACD,WAAO,CAAC,YAAY,GAAG,IAAI,CAAC;IAC5B;GACD;;;;;;;;;AAAC,AAUF,SAAO,CAAC,KAAK,GAAG,YAAU;AACzB,OAAM,OAAO,CAAC,OAAO,CAAC,KAAK,IAAE,KAAK,EAAI;AACrC,WAAO,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,EAAC,SAAS,CAAC,CAAC;IACrC;GACD;;;;;;AAAC,AAMF,SAAO,CAAC,GAAG,GAAG,YAAU;;AAEvB,OACC,aAAa,GAAG,EAAE,OAAO,OAAO,KAAK,WAAW,IAAI,OAAO,OAAO,CAAC,GAAG,KAAK,WAAW,IAAI,OAAO,OAAO,CAAC,GAAG,CAAC,KAAK,KAAK,WAAW,CAAA,AAAC;OACnI,QAAQ,GAAG,QAAQ,CAAC,cAAc,CAAC,KAAK,CAAC;OACzC,OAAO;OACP,CAAC;OAAC,CAAC;OACH,IAAI;OAAC,GAAG;;;AACP,AAGF,OAAK,aAAa,EAAG;AACpB,QAAI,GAAG,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;AAC7C,WAAO,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC;AACvB,QAAK,OAAO,OAAO,CAAC,KAAK,KAAK,WAAW,EAAG;AAC3C,YAAO,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,EAAC,CAAC,OAAO,EAAC,IAAI,CAAC,CAAC,CAAC;KAC5C,MACI;AACJ,YAAO,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,EAAC,CAAC,OAAO,EAAC,IAAI,CAAC,CAAC,CAAC;KAC1C;IACD,MACI;AACJ,WAAO,GAAI,IAAI,GAAC,SAAS,CAAC,CAAC,CAAC,GAAC,IAAI,AAAC,CAAC;IACnC;;;AAAA,AAGD,QAAM,CAAC,GAAC,CAAC,EAAC,CAAC,GAAC,SAAS,CAAC,MAAM,EAAE,CAAC,GAAC,CAAC,EAAE,EAAE,CAAC,EAAG;AACxC,OAAG,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;AACnB,QAAK,QAAO,GAAG,yCAAH,GAAG,OAAK,QAAQ,IAAI,OAAO,IAAI,KAAK,WAAW,EAAG;AAC7D,SAAI;AACH,SAAG,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;MAC1B,CACD,OAAQ,SAAS,EAAG;;MAEnB;KACD;AACD,WAAO,IAAI,IAAI,GAAC,GAAG,GAAC,IAAI,CAAC;IACzB;;;AAAA,AAGD,OAAK,QAAQ,EAAG;AACf,YAAQ,CAAC,KAAK,IAAI,OAAO,GAAC,WAAW,CAAC;AACtC,YAAQ,CAAC,SAAS,GAAG,QAAQ,CAAC,YAAY,GAAG,QAAQ,CAAC,YAAY,CAAC;;;AACnE,QAEI,IAAK,CAAC,aAAa,EAAG;AAC1B,UAAK,CAAC,OAAO,CAAC,CAAC;KACf;;;AAAA,AAGD,UAAO,IAAI,CAAC;GACZ;;;;;;;;;;;;;AAAC,AAcF,SAAO,CAAC,+BAA+B,GAAG,YAAU;AACnD,OAAI,MAAM,GAAG,OAAO,CAAC,+BAA+B,CAAC,MAAM,GACzD,AAAC,OAAO,OAAO,CAAC,+BAA+B,CAAC,MAAM,KAAK,WAAW,GACrE,OAAO,CAAC,+BAA+B,CAAC,MAAM,GAC9C,AAAC,YAAU;AACX,QAAI,CAAC,GAAG,CAAC;QACP,GAAG,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;QACnC,GAAG,GAAG,GAAG,CAAC,oBAAoB,CAAC,GAAG,CAAC,CAAC;AACtC,WAAQ,CAAC,GAAG,CAAC,SAAS,GAAG,gBAAgB,GAAI,EAAE,CAAC,AAAC,GAAG,uBAAuB,CAAA,IAAK,GAAG,CAAC,CAAC,CAAC,EAAG,EAAE;AAC3F,WAAO,AAAC,CAAC,GAAG,CAAC,GAAI,CAAC,GAAG,KAAK,CAAC;IAC3B,EAAG,CACJ;AACF,UAAO,MAAM,CAAC;GACd;;;;;;;;;AAAC,AASF,SAAO,CAAC,kBAAkB,GAAG,YAAU;AACtC,OAAI,MAAM,GACT,OAAO,CAAC,kBAAkB,CAAC,MAAM,GACjC,AAAC,OAAO,OAAO,CAAC,kBAAkB,CAAC,MAAM,KAAK,WAAW,GACtD,OAAO,CAAC,kBAAkB,CAAC,MAAM,GACjC,OAAO,CAAC,OAAO,CAAC,+BAA+B,EAAE,CAAC,CACpD;AACF,UAAO,MAAM,CAAC;GACd;;;;;;;AAAC,AAOF,MAAI,OAAO,CAAC,OAAO,CAAC,SAAS,EAAE;AAC9B,UAAO,CAAC,QAAQ,GAAG;AAClB,aAAS,EAAG,IAAI;AAChB,cAAU,EAAE,IAAI;IAChB,CAAC;GACF,MAEI;;AAEJ,UAAO,CAAC,QAAQ,GAAG;AAClB,aAAS,EAAE,CAAC,OAAO,CAClB,MAAM,CAAC,OAAO,IAAI,MAAM,CAAC,OAAO,CAAC,SAAS,IAAI,MAAM,CAAC,OAAO,CAAC,YAAY,IACtE,EACF,AAAC,+CAA+C,CAAE,IAAI,CAAC,SAAS,CAAC,SAAS;AAAC,QACxE,AAAC,+BAA+B,CAAE,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC;KAAA,AAC9D,CACD;AACD,cAAU,EAAE,OAAO,CAClB,EAAE,AAAC,cAAc,IAAI,MAAM,IAAM,cAAc,IAAI,QAAQ,CAAC,AAAC,IAE5D,OAAO,CAAC,kBAAkB,EAAE,IAAI,OAAO,CAAC,+BAA+B,EAAE,GAAG,CAAC,AAAC,CAC/E;IACD,CAAC;GACF;;;;;;AAAA,AAMD,SAAO,CAAC,OAAO,GAAG,CAAC,OAAO,CAAC,QAAQ,CAAC,SAAS;;;;;;AAAC,AAM9C,SAAO,CAAC,IAAI,GAAG;;;;;AAKd,UAAO,EAAE,OAAO,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,SAAS,IAAI,SAAS,CAAC,MAAM,KAAK,sBAAsB,IAAI,8BAA8B,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;;;;;;AAMxJ,aAAU,EAAE,OAAO,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,SAAS,IAAI,SAAS,CAAC,MAAM,KAAK,sBAAsB,IAAI,8BAA8B,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;;;;;AAK3J,gBAAa,EAAE,OAAO,CAAC,OAAO,CAAC,kBAAkB,EAAE,IAAI,OAAO,CAAC,+BAA+B,EAAE,GAAG,CAAC,CAAC;;;;;AAKrG,aAAU,EAAE,OAAO,CAAC,OAAO,CAAC,kBAAkB,EAAE,IAAI,OAAO,CAAC,+BAA+B,EAAE,GAAG,CAAC,CAAC;GAClG;;;;;;;;AAAC,AAQF,SAAO,CAAC,aAAa,GAAG,UAAS,GAAG,EAAE;AACrC,QAAM,IAAI,IAAI,IAAI,GAAG,EAAG;AACvB,QAAK,GAAG,CAAC,cAAc,CAAC,IAAI,CAAC,EAAG;AAC/B,YAAO,KAAK,CAAC;KACb;IACD;AACD,UAAO,IAAI,CAAC;GACZ;;;;;;;;AAAC,AAQF,SAAO,CAAC,WAAW,GAAG,UAAS,GAAG,EAAE;AACnC,OAAI,IAAI,EAAC,MAAM,CAAC;AAChB,OAAK,GAAG,EAAG;AACV,QAAI,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;AAC3B,UAAM,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;IAC1B,MACI;AACJ,UAAM,GAAG,EAAE,CAAC;IACZ;AACD,UAAO,MAAM,CAAC;GACd;;;;;;;;;;AAAC,AAWF,SAAO,CAAC,UAAU,GAAG,YAAU;;AAE9B,OAAI,OAAO,GAAG,QAAQ,CAAC,QAAQ,CAAC,QAAQ,GAAC,IAAI,IAAE,QAAQ,CAAC,QAAQ,CAAC,QAAQ,IAAE,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAA,AAAC,CAAC;AACnG,OAAK,QAAQ,CAAC,QAAQ,CAAC,IAAI,IAAE,KAAK,EAAG;AACpC,WAAO,IAAI,GAAG,GAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC;IACtC;AACD,UAAO,IAAI,GAAG;;;AAAC,AAGf,UAAO,OAAO,CAAC;GACf;;;;;;;AAAC,AAOF,SAAO,CAAC,WAAW,GAAG,YAAU;;AAE/B,OACC,YAAY,GAAG,QAAQ,CAAC,oBAAoB,CAAC,MAAM,CAAC;OACpD,WAAW,GAAG,IAAI;OAClB,QAAQ,GAAG,EAAE;;;AAAC,AAGf,OAAK,YAAY,CAAC,MAAM,KAAK,CAAC,EAAG;;AAEhC,eAAW,GAAG,YAAY,CAAC,CAAC,CAAC,CAAC;AAC9B,YAAQ,GAAG,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,EAAC,EAAE,CAAC,CAAC;IAClD;;;AAAA,AAGD,WAAQ,GAAG,QAAQ,CAAC,OAAO,CAAC,MAAM,EAAC,EAAE,CAAC,CAAC;AACvC,OAAK,QAAQ,EAAG,QAAQ,IAAI,GAAG,CAAC;;;AAAA,AAGhC,UAAO,QAAQ,CAAC;GAChB;;;;;;;AAAC,AAOF,SAAO,CAAC,UAAU,GAAG,YAAU;;AAE9B,OAAI,OAAO,GAAG,OAAO,CAAC,WAAW,EAAE,IAAE,OAAO,CAAC,cAAc,EAAE,IAAE,OAAO,CAAC,UAAU,EAAE;;;AAAC,AAGpF,UAAO,OAAO,CAAC;GACf;;;;;;;AAAC,AAOF,SAAO,CAAC,UAAU,GAAG,YAAU;;AAE9B,OACC,KAAK,GAAG,OAAO,CAAC,QAAQ,CAAC,KAAK,EAAC,KAAK,CAAC;OACrC,QAAQ,GAAG,CAAC,KAAK,IAAE,EAAE,CAAA,CAAE,GAAG,IAAE,OAAO,CAAC,eAAe,EAAE;OACrD,OAAO;;;AAAC,AAGT,UAAO,GAAG,QAAQ,CAAC,OAAO,CAAC,MAAM,EAAC,EAAE,CAAC,CAAC,OAAO,CAAC,SAAS,EAAC,UAAS,IAAI,EAAC,KAAK,EAAC,MAAM,EAAC;AAClF,WAAO,AAAC,KAAI,CAAE,IAAI,CAAC,IAAI,CAAC,GAAG,IAAI,GAAG,IAAI,GAAC,GAAG;MAAC;IAC3C,CAAC;;;AAAC,AAGH,UAAO,OAAO,CAAC;GACf;;;;;;;AAAC,AAOF,SAAO,CAAC,cAAc,GAAG,YAAU;;AAElC,OAAI,WAAW,GAAG,AAAC,OAAO,CAAC,eAAe,EAAE,CAAE,OAAO,CAAC,SAAS,EAAC,EAAE,CAAC,CAAC,OAAO,CAAC,SAAS,EAAC,UAAS,IAAI,EAAC,KAAK,EAAC,MAAM,EAAC;AAChH,WAAO,AAAC,SAAQ,CAAE,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,IAAI;MAAC;IACzC,CAAC,CAAC,OAAO,CAAC,MAAM,EAAC,EAAE,CAAC,GAAC,GAAG;;;AAAC,AAG1B,UAAO,WAAW,CAAC;GACnB;;;;;;;;;AAAC,AASF,SAAO,CAAC,UAAU,GAAG,UAAS,GAAG,EAAC,aAAa,EAAC;;AAE/C,OAAI,OAAO,GAAG,GAAG;OAAE,SAAS,GAAG,GAAG,CAAC,SAAS,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC;AAClD,gBAAa,GAAG,AAAC,OAAO,aAAa,KAAK,WAAW,GAAI,IAAI,GAAG,aAAa;;;AAAC,AAG9E,OAAK,cAAc,CAAC,IAAI,CAAC,GAAG,CAAC,EAAG;;IAE/B,MACI,IAAK,SAAS,KAAK,GAAG,EAAG;;AAE7B,YAAO,GAAG,OAAO,CAAC,UAAU,EAAE,GAAC,GAAG,CAAC,OAAO,CAAC,MAAM,EAAC,EAAE,CAAC,CAAC;KACtD,MACI,IAAK,SAAS,KAAK,GAAG,EAAG;;AAE7B,YAAO,GAAG,OAAO,CAAC,UAAU,EAAE,CAAC,OAAO,CAAC,KAAK,EAAC,EAAE,CAAC,GAAC,GAAG,CAAC;KACrD,MACI,IAAK,SAAS,KAAK,GAAG,EAAG;;AAE7B,YAAO,GAAG,OAAO,CAAC,UAAU,EAAE,CAAC,OAAO,CAAC,SAAS,EAAC,EAAE,CAAC,GAAC,GAAG,CAAC;KACzD,MACI;;AAEJ,SAAK,aAAa,EAAG;AACpB,aAAO,GAAG,OAAO,CAAC,UAAU,EAAE,GAAC,GAAG,CAAC,OAAO,CAAC,UAAU,EAAC,EAAE,CAAC,CAAC;MAC1D,MAAM;AACN,aAAO,GAAG,OAAO,CAAC,cAAc,EAAE,GAAC,GAAG,CAAC,OAAO,CAAC,UAAU,EAAC,EAAE,CAAC,CAAC;MAC9D;;;;;;AAAA,KAMD;;;AAAA,AAGD,UAAO,OAAO,CAAC,OAAO,CAAC,KAAK,EAAC,EAAE,CAAC,CAAC;GACjC;;;;;;;;AAAC,AAQF,SAAO,CAAC,WAAW,GAAG,UAAS,GAAG,EAAC;;AAElC,OAAI,QAAQ,GAAG,GAAG;OAAE,OAAO,GAAG,OAAO,CAAC,UAAU,EAAE;OAAE,OAAO,GAAG,OAAO,CAAC,UAAU,EAAE;;;AAAC,AAGnF,OAAK,OAAO,CAAC,QAAQ,CAAC,SAAS,EAAG;;;;AAIjC,YAAQ,GAAG,QAAQ,CAAC,OAAO,CAAC,OAAO,EAAC,EAAE,CAAC,CAAC;IACxC;;;AAAA,AAGD,WAAQ,GAAG,QAAQ,CAAC,OAAO,CAAC,OAAO,EAAC,GAAG,CAAC;;;AAAC,AAGzC,OAAK,OAAO,CAAC,mBAAmB,CAAC,QAAQ,CAAC,EAAG;AAC5C,YAAQ,GAAG,IAAI,GAAC,QAAQ,CAAC;IACzB;;;AAAA,AAGD,WAAQ,GAAG,QAAQ,CAAC,OAAO,CAAC,WAAW,EAAC,IAAI,CAAC,CAAC,OAAO,CAAC,KAAK,EAAC,EAAE,CAAC;;;AAAC,AAGhE,UAAO,QAAQ,CAAC;GAChB;;;;;;;;;;;;AAAC,AAYF,SAAO,CAAC,eAAe,GAAG,UAAS,GAAG,EAAE;AACvC,MAAG,GAAG,GAAG,IAAI,QAAQ;;;AAAC,AAGtB,OAAI,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,QAAQ,CAAC,IAAI,EAChC,OAAO,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC;;;;AAAA,AAI1B,OAAI,GAAG,CAAC,QAAQ,CAAC,IAAI,KAAK,kBAAkB,CAAC,GAAG,CAAC,GAAG,CAAC,EACpD,OAAO,GAAG,CAAC,GAAG,CAAC;;;;AAAA,AAIhB,OAAI,GAAG,CAAC,QAAQ,CAAC,IAAI,IAAI,kBAAkB,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC,KAAK,GAAG,CAAC,QAAQ,CAAC,IAAI,EACzG,OAAO,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC;;AAE1B,OAAI,GAAG,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,IAAI,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,EACrE,OAAO,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC;;AAE1B,UAAO,GAAG,CAAC,GAAG,IAAI,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC;GACpC;;;;;;;;;AAAC,AAUF,SAAO,CAAC,KAAK,GAAG,EAAE;;;;;;AAAC,AAMnB,SAAO,CAAC,SAAS,GAAG,OAAO,CAAC,SAAS,IAAE,EAAE;;;;;;AAAC,AAM1C,SAAO,CAAC,SAAS,GAAG,OAAO,CAAC,SAAS,IAAE,EAAE;;;;;;AAAC,AAM1C,SAAO,CAAC,OAAO,GAAG,OAAO,CAAC,OAAO,IAAE,EAAE;;;;;;AAAC,AAMtC,SAAO,CAAC,YAAY,GAAG,OAAO,CAAC,YAAY,IAAE,EAAE;;;;;;AAAC,AAMhD,SAAO,CAAC,WAAW,GAAG,OAAO,CAAC,WAAW,IAAE,EAAE;;;;;;AAAC,AAM9C,SAAO,CAAC,cAAc,GAAG,YAAU;AAClC,UAAO,CAAC,KAAK,CAAC,SAAS,GAAG,OAAO,CAAC,KAAK,CAAC,SAAS,IAAE,EAAE,CAAC;AACtD,UAAO,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC,KAAK,CAAC,OAAO,IAAE,EAAE,CAAC;AAClD,UAAO,CAAC,KAAK,CAAC,SAAS,GAAG,OAAO,CAAC,KAAK,CAAC,SAAS,IAAE,EAAE,CAAC;GACtD;;;;;;;;;AAAC,AASF,SAAO,CAAC,QAAQ,GAAG,UAAS,QAAQ,EAAC,MAAM,EAAC;;AAE3C,OAAK,OAAO,QAAQ,KAAK,WAAW,EAAG;AAAE,YAAQ,GAAG,IAAI,CAAC;IAAE;AAC3D,OAAK,OAAO,MAAM,KAAK,WAAW,EAAG;AAAE,UAAM,GAAG,IAAI,CAAC;IAAE;;;AAAA,AAGvD,OAAI,KAAK,GAAG,OAAO,CAAC,iBAAiB,EAAE;;;AAAC,AAGxC,OAAK,CAAC,KAAK,IAAI,MAAM,EAAG;AACvB,SAAK,GAAG,OAAO,CAAC,iBAAiB,EAAE,CAAC;IACpC;;;AAAA,AAGD,OAAK,QAAQ,EAAG;AACf,SAAK,GAAG,OAAO,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;AACnC,SAAK,CAAC,GAAG,GAAG,KAAK,CAAC,QAAQ,IAAE,KAAK,CAAC,GAAG,CAAC;IACtC;;;AAAA,AAGD,UAAO,KAAK,CAAC;GACb;;;;;;;;AAAC,AAQF,SAAO,CAAC,YAAY,GAAG,UAAS,QAAQ,EAAC;;;AAGxC,OAAI,EAAE,GAAG,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,GAAG,CAAC;OACvC,GAAG,CAAC;;AAEL,OAAK,CAAC,EAAE,EAAG;;AAEV,OAAG,GAAG,OAAO,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;AACvC,QAAK,OAAO,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,WAAW,EAAG;AACpD,OAAE,GAAG,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;KAC5B,MACI,IAAK,OAAO,OAAO,CAAC,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,WAAW,EAAG;AAC/D,OAAE,GAAG,OAAO,CAAC,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;KAClC,MACI;;AAEJ,YAAQ,IAAI,EAAG;AACd,QAAE,GAAG,AAAC,IAAI,IAAI,EAAE,CAAE,OAAO,EAAE,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,OAAO,CAAC,KAAK,EAAC,EAAE,CAAC,CAAC;AACtE,UAAK,OAAO,OAAO,CAAC,SAAS,CAAC,EAAE,CAAC,KAAK,WAAW,IAAI,OAAO,OAAO,CAAC,KAAK,CAAC,SAAS,CAAC,EAAE,CAAC,KAAK,WAAW,EAAG;AACzG,aAAM;OACN;MACD;;;AAAA,AAGD,YAAO,CAAC,SAAS,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;AAC5B,YAAO,CAAC,SAAS,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC;KACjC;IACD;;;AAAA,AAGD,UAAO,EAAE,CAAC;GACV;;;;;;;;AAAC,AAQF,SAAO,CAAC,cAAc,GAAG,UAAS,QAAQ,EAAC;;AAE1C,OAAI,QAAQ,EAAE,YAAY;;;AAAC,AAG3B,OAAK,CAAC,QAAQ,IAAK,QAAO,QAAQ,yCAAR,QAAQ,OAAK,QAAQ,AAAC,EAAG;AAClD,YAAQ,GAAG,EAAE,CAAC;IACd;;;AAAA,AAGD,OAAK,OAAO,QAAQ,CAAC,UAAU,KAAK,WAAW,EAAG;AACjD,WAAO,QAAQ,CAAC;IAChB;;;AAAA,AAGD,OAAK,CAAC,QAAQ,CAAC,IAAI,IAAK,QAAO,QAAQ,CAAC,IAAI,MAAK,QAAQ,AAAC,EAAG;AAC5D,YAAQ,CAAC,IAAI,GAAG,EAAE,CAAC;IACnB;;;;;AAAA,AAKD,WAAQ,GAAG,EAAE,CAAC;AACd,WAAQ,CAAC,UAAU,GAAG,IAAI,CAAC;AAC3B,WAAQ,CAAC,KAAK,GAAG,QAAQ,CAAC,KAAK,IAAE,EAAE,CAAC;AACpC,WAAQ,CAAC,GAAG,GAAG,OAAO,CAAC,UAAU,CAAC,QAAQ,CAAC,GAAG,GAAC,QAAQ,CAAC,GAAG,GAAE,OAAO,CAAC,eAAe,EAAE,AAAC,CAAC,CAAC;AACzF,WAAQ,CAAC,IAAI,GAAG,OAAO,CAAC,WAAW,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;AAClD,WAAQ,CAAC,IAAI,GAAG,OAAO,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC;;;AAAC,AAGnD,WAAQ,CAAC,EAAE,GAAG,OAAO,CAAC,YAAY,CAAC,QAAQ,CAAC;;;;;AAAC,AAK7C,WAAQ,CAAC,QAAQ,GAAG,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,cAAc,EAAC,EAAE,CAAC,CAAC;AAC5D,WAAQ,CAAC,GAAG,GAAG,QAAQ,CAAC,QAAQ;;;AAAC,AAGjC,eAAY,GAAG,CAAC,OAAO,CAAC,aAAa,CAAC,QAAQ,CAAC,IAAI,CAAC;;;AAAC,AAGrD,OAAK,CAAC,QAAQ,CAAC,KAAK,IAAI,YAAY,CAAA,IAAK,OAAO,CAAC,OAAO,CAAC,WAAW,KAAK,IAAI,EAAG;;AAE/E,YAAQ,CAAC,IAAI,GAAG,OAAO,CAAC,WAAW,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,cAAc,EAAC,EAAE,CAAC,CAAC;AAC7E,QAAK,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAG;AAChC,aAAQ,CAAC,IAAI,IAAI,GAAG,CAAC;KACrB;AACD,YAAQ,CAAC,IAAI,IAAI,SAAS,GAAC,QAAQ,CAAC,EAAE,CAAC;IACvC;;;AAAA,AAGD,WAAQ,CAAC,SAAS,GAAG,OAAO,CAAC,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC;;;;;AAAC,AAKvD,OAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,SAAS,IAAI,OAAO,CAAC,IAAI,CAAC,UAAU,CAAA,IAAK,OAAO,CAAC,eAAe,CAAC,QAAQ,CAAC,EAAG;AACnG,YAAQ,CAAC,GAAG,GAAG,QAAQ,CAAC,SAAS,CAAC;IAClC;;;;;AAAA,AAKD,UAAO,QAAQ,CAAC;GAChB;;;;;;;;;;AAAC,AAUF,SAAO,CAAC,iBAAiB,GAAG,UAAS,IAAI,EAAC,KAAK,EAAC,GAAG,EAAC;;AAEnD,OAAI,KAAK,GAAG;AACX,UAAM,EAAE,IAAI;AACZ,WAAO,EAAE,KAAK;AACd,SAAK,EAAE,GAAG;IACV;;;AAAC,AAGF,QAAK,GAAG,OAAO,CAAC,cAAc,CAAC,KAAK,CAAC;;;AAAC,AAGtC,UAAO,KAAK,CAAC;GACb;;;;;;;AAAC,AAOF,SAAO,CAAC,YAAY,GAAG,UAAS,EAAE,EAAC;;AAElC,KAAE,GAAG,MAAM,CAAC,EAAE,CAAC;;;AAAC,AAGhB,OAAI,KAAK,GAAG,OAAO,CAAC,SAAS,CAAC,EAAE,CAAC,IAAI,OAAO,CAAC,KAAK,CAAC,SAAS,CAAC,EAAE,CAAC,IAAI,SAAS;;;AAAC,AAG9E,UAAO,KAAK,CAAC;GACb;;;;;;AAAC,AAMF,SAAO,CAAC,cAAc,GAAG,UAAS,WAAW,EAAC;;AAE7C,OAAI,KAAK,EAAE,YAAY,EAAE,GAAG;;;AAAC,AAG7B,QAAK,GAAG,OAAO,CAAC,cAAc,CAAC,WAAW,CAAC;;;AAAC,AAG5C,eAAY,GAAG;AACd,QAAI,EAAE,KAAK,CAAC,IAAI;AAChB,SAAK,EAAE,WAAW,CAAC,KAAK;AACxB,OAAG,EAAE,WAAW,CAAC,GAAG;IACpB;;;AAAC,AAGF,MAAG,GAAG,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC;;;AAAC,AAGnC,UAAO,GAAG,CAAC;GACX;;;;;;;AAAC,AAOF,SAAO,CAAC,UAAU,GAAG,UAAS,WAAW,EAAC;;AAEzC,OAAI,KAAK,EAAE,EAAE;;;AAAC,AAGd,QAAK,GAAG,OAAO,CAAC,cAAc,CAAC,WAAW,CAAC;;;AAAC,AAG5C,KAAE,GAAG,KAAK,CAAC,EAAE;;;AAAC,AAGd,UAAO,EAAE,CAAC;GACV;;;;;;;;AAAC,AAQF,SAAO,CAAC,cAAc,GAAG,UAAS,WAAW,EAAC;;AAE7C,OAAI,KAAK,EAAE,IAAI;;;AAAC,AAGhB,QAAK,GAAG,OAAO,CAAC,cAAc,CAAC,WAAW,CAAC;;;AAAC,AAG5C,OAAI,GAAG,KAAK,CAAC,IAAI;;;AAAC,AAGlB,UAAO,IAAI,CAAC;GACZ;;;;;;;;AAAC,AAQF,SAAO,CAAC,SAAS,GAAG,UAAW,WAAW,EAAG;;AAE5C,OAAI,EAAE,EAAC,KAAK,EAAC,GAAG,EAAE,GAAG;;;;;AAAC,AAKtB,OAAI,WAAW,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,EAClC;AACC,OAAG,GAAG,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IAChC,MAED;AACC,OAAG,GAAG,WAAW,CAAC;IAClB;;AAED,QAAK,GAAG,uBAAuB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AAC1C,MAAG,GAAG,KAAK,GAAI,KAAK,CAAC,CAAC,CAAC,IAAE,WAAW,GAAI,WAAW,CAAC;AACpD,KAAE,GAAG,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,IAAE,EAAE,CAAC,GAAG,EAAE;;;AAAC,AAGvC,UAAO,EAAE,IAAE,KAAK,CAAC;GACjB;;;;;;;;AAAC,AAQF,SAAO,CAAC,mBAAmB,GAAG,UAAS,WAAW,EAAC;;AAElD,OAAI,aAAa,GAAG,CAAE,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC,AAAC;;;AAAC,AAGpD,UAAO,aAAa,CAAC;GACrB;;;;;;;;AAAC,AAQF,SAAO,CAAC,YAAY,GAAG,UAAS,WAAW,EAAC,MAAM,EAAC;;AAElD,OAAI,KAAK,GAAG,IAAI;OAAE,EAAE;OAAE,GAAG,CAAC;AAC1B,SAAM,GAAG,MAAM,IAAE,KAAK;;;AAAC,AAGvB,KAAE,GAAG,OAAO,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;AACpC,OAAK,EAAE,EAAG;AACT,SAAK,GAAG,OAAO,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;IACjC;;;AAAA,AAGD,OAAK,CAAC,KAAK,EAAG;;AAEb,OAAG,GAAG,OAAO,CAAC,UAAU,CAAC,WAAW,CAAC;;;AAAC,AAGtC,MAAE,GAAG,OAAO,CAAC,UAAU,CAAC,GAAG,CAAC,IAAE,KAAK,CAAC;AACpC,QAAK,EAAE,EAAG;AACT,UAAK,GAAG,OAAO,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;KACjC;;;AAAA,AAGD,QAAK,CAAC,KAAK,IAAI,MAAM,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,WAAW,CAAC,EAAG;AACpE,UAAK,GAAG,OAAO,CAAC,iBAAiB,CAAC,IAAI,EAAC,IAAI,EAAC,GAAG,CAAC,CAAC;KACjD;IACD;;;AAAA,AAGD,UAAO,KAAK,CAAC;GACb;;;;;;AAAC,AAMF,SAAO,CAAC,UAAU,GAAG,UAAS,GAAG,EAAC;;AAEjC,OAAI,EAAE,GAAG,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,SAAS;;;AAAC,AAGzE,UAAO,EAAE,CAAC;GACV;;;;;;;AAAC,AAOF,SAAO,CAAC,iBAAiB,GAAG,YAAU;AACrC,UAAO,OAAO,CAAC,WAAW,CAAC,OAAO,CAAC,WAAW,CAAC,MAAM,GAAC,CAAC,CAAC,IAAE,SAAS,CAAC;GACpE;;;;;;;AAAC,AAOF,SAAO,CAAC,kBAAkB,GAAG,YAAU;AACtC,UAAO,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,YAAY,CAAC,MAAM,GAAC,CAAC,CAAC,IAAE,SAAS,CAAC;GACtE;;;;;;;;AAAC,AAQF,SAAO,CAAC,eAAe,GAAG,UAAS,QAAQ,EAAE;;AAE5C,OAAI,YAAY,GAAG,KAAK;OACvB,QAAQ;;;AAAC,AAGV,WAAQ,GAAG,OAAO,CAAC,YAAY,CAAC,QAAQ,CAAC,GAAG,CAAC;;;AAAC,AAG9C,eAAY,GAAG,QAAQ,IAAI,QAAQ,CAAC,EAAE,KAAK,QAAQ,CAAC,EAAE;;;AAAC,AAGvD,UAAO,YAAY,CAAC;GACpB;;;;;;;;AAAC,AAQF,SAAO,CAAC,UAAU,GAAG,UAAS,QAAQ,EAAC;;AAEtC,UAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,QAAQ,CAAC,EAAE;;;AAAC,AAG5C,UAAO,CAAC,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;;;AAAC,AAGzD,UAAO,QAAQ,CAAC;GAChB;;;;;;;;AAAC,AAQF,SAAO,CAAC,gBAAgB,GAAG,UAAS,QAAQ,EAAC;;AAE5C,OAAI,MAAM,GAAG,KAAK;OACjB,KAAK;OAAE,QAAQ;OAAE,KAAK;;;AAAC,AAGxB,OAAK,OAAO,CAAC,WAAW,CAAC,MAAM,EAAG;AACjC,SAAK,GAAG,QAAQ,CAAC,EAAE,CAAC;AACpB,YAAQ,GAAG,OAAO,CAAC,iBAAiB,EAAE,CAAC;AACvC,SAAK,GAAG,QAAQ,CAAC,EAAE;;;AAAC,AAGpB,UAAM,GAAI,KAAK,KAAK,KAAK,AAAC,CAAC;IAC3B;;;AAAA,AAGD,UAAO,MAAM,CAAC;GACd;;;;;;;;AAAC,AAQF,SAAO,CAAC,SAAS,GAAG,UAAS,QAAQ,EAAC;;AAErC,OAAK,OAAO,CAAC,gBAAgB,CAAC,QAAQ,CAAC,EAAG;AACzC,WAAO,KAAK,CAAC;IACb;;;AAAA,AAGD,UAAO,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;;;AAAC,AAGxD,UAAO,IAAI,CAAC;GACZ;;;;;;;;AAAC,AAQF,SAAO,CAAC,eAAe,GAAG,UAAS,KAAK,EAAC;;AAExC,OAAI,KAAK,GAAG,IAAI;;;AAAC,AAGjB,OAAK,OAAO,KAAK,KAAK,WAAW,EAAG;;AAEnC,SAAK,GAAG,OAAO,CAAC,WAAW,CAAC,OAAO,CAAC,WAAW,CAAC,MAAM,GAAC,CAAC,CAAC,CAAC;IAC1D,MACI,IAAK,KAAK,GAAG,CAAC,EAAG;;AAErB,SAAK,GAAG,OAAO,CAAC,WAAW,CAAC,OAAO,CAAC,WAAW,CAAC,MAAM,GAAC,KAAK,CAAC,CAAC;IAC9D,MACI;;AAEJ,SAAK,GAAG,OAAO,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;IACnC;;;AAAA,AAGD,UAAO,KAAK,CAAC;GACb;;;;;;;AAAC,AAOF,SAAO,CAAC,eAAe,GAAG,YAAU;;AAEnC,OAAI,KAAK,GAAG,IAAI;;;AAAC,AAGjB,OAAG,OAAO,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE;AAClC,SAAK,GAAG,CAAC,CAAC;IACV,MACI;AACJ,SAAK,GAAG,OAAO,CAAC,WAAW,CAAC,MAAM,GAAC,CAAC,CAAC;IACrC;AACD,UAAO,KAAK,CAAC;GACb;;;;;;;;;;;;AAAC,AAYF,SAAO,CAAC,OAAO,GAAG,UAAS,GAAG,EAAC;AAC9B,OAAI,GAAG,GAAG,OAAO,CAAC,eAAe,CAAC,GAAG,CAAC;OACrC,IAAI,CAAC;AACN,OAAI,GAAG,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;AACjC,UAAO,IAAI,CAAC;GACZ;;;;;;;;AAAC,AAQF,SAAO,CAAC,YAAY,GAAG,UAAS,IAAI,EAAC;;AAEpC,OAAI,MAAM,GAAG,OAAO,CAAC,aAAa,CAAC,IAAI,CAAC;;;AAAC,AAGzC,SAAM,GAAG,kBAAkB,CAAC,MAAM,CAAC;;;AAAC,AAGpC,UAAO,MAAM,CAAC;GACd;;;;;;;AAAC,AAOF,SAAO,CAAC,aAAa,GAAG,UAAS,IAAI,EAAC;;AAErC,OAAI,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAC,EAAE,CAAC,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;;;AAAC,AAG1D,UAAO,MAAM,CAAC;GACd;;;;;;;;AAAC,AAQF,SAAO,CAAC,OAAO,GAAG,UAAS,IAAI,EAAC,KAAK,EAAC;;AAErC,OAAI,KAAK,EAAE,OAAO;;;AAAC,AAGnB,OAAK,KAAK,KAAK,KAAK,IAAI,OAAO,CAAC,IAAI,EAAE,EAAG;;;AAGxC,WAAO,CAAC,SAAS,CAAC;AACjB,UAAK,EAAE,OAAO;AACd,aAAQ,EAAE,OAAO,CAAC,OAAO;AACzB,SAAI,EAAE,SAAS;AACf,UAAK,EAAE,KAAK;KACZ,CAAC,CAAC;AACH,WAAO,KAAK,CAAC;IACb;;;;;;AAAA,AAMD,UAAO,CAAC,IAAI,CAAC,IAAI,CAAC;;;AAAC,AAGnB,QAAK,GAAG,OAAO,CAAC,YAAY,CAAC,IAAI,EAAC,IAAI,CAAC,CAAC;AACxC,OAAK,KAAK,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,SAAS,EAAG;;;;;AAK3C,WAAO,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,EAAC,KAAK,CAAC,KAAK,EAAC,KAAK,CAAC,GAAG,EAAC,KAAK,CAAC,CAAC;IAC1D,MACI,IAAK,OAAO,CAAC,OAAO,EAAE,KAAK,IAAI,EAAG;;;;AAItC,QAAK,OAAO,CAAC,IAAI,CAAC,OAAO,EAAG;;;;AAI3B,YAAO,GAAG,OAAO,CAAC,UAAU,EAAE;;;AAAC,AAG/B,YAAO,CAAC,SAAS,CAAC,IAAI,EAAC,IAAI,EAAC,OAAO,GAAC,GAAG,GAAC,IAAI,EAAC,KAAK,CAAC,CAAC;KACpD,MACI;;AAEJ,aAAQ,CAAC,QAAQ,CAAC,IAAI,GAAG,IAAI,CAAC;KAC9B;IACD;;;AAAA,AAGD,UAAO,OAAO,CAAC;GACf;;;;;;;AAAC,AAOF,SAAO,CAAC,UAAU,GAAG,UAAS,IAAI,EAAC;;AAElC,OAAI,MAAM,GAAG,OAAO,CAAC,aAAa,CAAC,IAAI,CAAC;;;AAAC,AAGzC,SAAM,GAAG,MAAM,CAAC,kBAAkB,CAAC,MAAM,CAAC;;;AAAC,AAG3C,OAAK,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,EAAG;;AAE/B,UAAM,GAAG,MAAM,CACb,OAAO,CAAC,OAAO,EAAC,GAAG,CAAC,CACpB,OAAO,CAAC,OAAO,EAAC,GAAG,CAAC,CACpB,OAAO,CAAC,OAAO,EAAC,GAAG,CAAC,CACpB,OAAO,CAAC,OAAO,EAAC,GAAG,CAAC,CAAC;IACvB;;;AAAA,AAGD,UAAO,MAAM,CAAC;GACd;;;;;;;;AAAC,AAQF,SAAO,CAAC,YAAY,GAAG,UAAS,GAAG,EAAC;;AAEnC,OAAI,IAAI,GAAG,MAAM,CAAC,GAAG,CAAC,CACpB,OAAO,CAAC,wBAAwB,EAAE,IAAI,CAAC;;;AACvC,AAGF,OAAI,GAAG,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC;;;AAAC,AAGlC,UAAO,IAAI,CAAC;GACZ;;;;;;;;AAAC,AAQF,SAAO,CAAC,QAAQ,GAAG,UAAS,QAAQ,EAAC;;AAEpC,OAAI,KAAK,GAAG,QAAQ,CAAC,KAAK;OACzB,UAAU;;;AAAC,AAGZ,OAAK,CAAC,KAAK,EAAG;AACb,cAAU,GAAG,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;AACxC,QAAK,UAAU,IAAI,UAAU,CAAC,GAAG,KAAK,QAAQ,CAAC,GAAG,EAAG;AACpD,UAAK,GAAG,UAAU,CAAC,KAAK,IAAE,OAAO,CAAC,OAAO,CAAC,YAAY,CAAC;KACvD;IACD;;;AAAA,AAGD,OAAI;AACH,YAAQ,CAAC,oBAAoB,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,GAAG,KAAK,CAAC,OAAO,CAAC,GAAG,EAAC,MAAM,CAAC,CAAC,OAAO,CAAC,GAAG,EAAC,MAAM,CAAC,CAAC,OAAO,CAAC,KAAK,EAAC,SAAS,CAAC,CAAC;IAC7H,CACD,OAAQ,SAAS,EAAG,EAAG;AACvB,WAAQ,CAAC,KAAK,GAAG,KAAK;;;AAAC,AAGvB,UAAO,OAAO,CAAC;GACf;;;;;;;;;;AAAC,AAWF,SAAO,CAAC,MAAM,GAAG,EAAE;;;;;;;AAAC,AAOpB,SAAO,CAAC,IAAI,GAAG,UAAS,KAAK,EAAC;;AAE7B,OAAK,OAAO,KAAK,KAAK,WAAW,EAAG;;AAEnC,WAAO,CAAC,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;;;AAC1B,QAEI,IAAK,OAAO,OAAO,CAAC,IAAI,CAAC,IAAI,KAAK,WAAW,EAAG;AACpD,YAAO,CAAC,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;KAC1B;;;AAAA,AAGD,OAAK,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,EAAG;;AAEzB,gBAAY,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;AACnC,QAAI,QAAQ,GAAG,SAAX,QAAQ,GAAa;AACxB,SAAI,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC;AACnB,SAAK,OAAO,CAAC,IAAI,CAAC,IAAI,EAAG,OAAO;AAChC,UAAM,CAAC,GAAC,OAAO,CAAC,MAAM,CAAC,MAAM,GAAC,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,EAAG;AAC9C,WAAK,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;AAC1B,UAAK,KAAK,CAAC,MAAM,KAAK,CAAC,EAAG,SAAS;AACnC,UAAI,GAAG,KAAK,CAAC,KAAK,EAAE,CAAC;AACrB,aAAO,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;AAC5B,aAAO,CAAC,IAAI,CAAC,OAAO,GAAG,UAAU,CAAC,QAAQ,EAAC,OAAO,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;MACtE;KACD,CAAC;AACF,WAAO,CAAC,IAAI,CAAC,OAAO,GAAG,UAAU,CAAC,QAAQ,EAAC,OAAO,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;IACtE;;;AAAA,AAGD,UAAO,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC;GACzB;;;;;AAAC,AAKF,SAAO,CAAC,IAAI,CAAC,IAAI,GAAG,KAAK;;;;;;;;AAAC,AAQ1B,SAAO,CAAC,aAAa,GAAG,UAAS,IAAI,EAAC;AACrC,UAAO,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,IAAE,OAAO,EAAC,IAAI,CAAC,IAAI,IAAE,EAAE,CAAC,CAAC;GAC9D;;;;;;;AAAC,AAOF,SAAO,CAAC,SAAS,GAAG,UAAS,IAAI,EAAC;;AAEjC,UAAO,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,IAAE,CAAC,CAAC,GAAG,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,IAAE,CAAC,CAAC,IAAE,EAAE;;;AAAC,AAGlE,UAAO,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,IAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;;;AAAC,AAGzC,UAAO,OAAO,CAAC;GACf;;;;;;AAAC,AAMF,SAAO,CAAC,KAAK,GAAG,UAAS,IAAI,EAAC,KAAK,EAAC;;AAEnC,OAAK,OAAO,IAAI,KAAK,UAAU,EAAG;AACjC,QAAI,GAAG;AACN,aAAQ,EAAE,IAAI;KACd,CAAC;IACF;AACD,OAAK,OAAO,KAAK,KAAK,WAAW,EAAG;AACnC,QAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACnB;;;AAAA,AAGD,OAAK,OAAO,CAAC,IAAI,EAAE,EAAG;AACrB,WAAO,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;IACxB,MAAM;AACN,WAAO,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;IAC5B;;;AAAA,AAGD,UAAO,OAAO,CAAC;GACf;;;;;;AAAC,AAMF,SAAO,CAAC,UAAU,GAAG,YAAU;AAC9B,UAAO,CAAC,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;AAC1B,UAAO,CAAC,MAAM,GAAG,EAAE,CAAC;AACpB,UAAO,OAAO,CAAC;GACf;;;;;;;;;AAAC,AAUF,SAAO,CAAC,YAAY,GAAG,KAAK;;;;;;AAAC,AAM7B,SAAO,CAAC,aAAa,GAAG,KAAK;;;;;;;AAAC,AAO9B,SAAO,CAAC,mBAAmB,GAAG,YAAU;;AAEvC,UAAO,CAAC,YAAY,GAAG,IAAI;;;AAAC,AAG5B,UAAO,CAAC,gBAAgB,EAAE;;;AAAC,AAG3B,UAAO,OAAO,CAAC;GACf;;;;;;;AAAC,AAOF,SAAO,CAAC,gBAAgB,GAAG,YAAU;;AAEpC,OAAK,OAAO,CAAC,aAAa,EAAG;AAC5B,gBAAY,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;AACpC,WAAO,CAAC,aAAa,GAAG,KAAK,CAAC;IAC9B;;;AAAA,AAGD,UAAO,OAAO,CAAC;GACf;;;;;;;AAAC,AAOF,SAAO,CAAC,WAAW,GAAG,UAAS,QAAQ,EAAC;;AAEvC,UAAO,CAAC,YAAY,GAAG,KAAK,CAAC;AAC7B,UAAO,CAAC,gBAAgB,EAAE;;;;AAAC,AAI3B,OAAK,OAAO,CAAC,IAAI,CAAC,aAAa,EAAG;;AAEjC,WAAO,CAAC,aAAa,GAAG,UAAU,CACjC,YAAU;AACT,YAAO,CAAC,gBAAgB,EAAE,CAAC;AAC3B,SAAK,CAAC,OAAO,CAAC,YAAY,EAAG;;;AAG5B,cAAQ,EAAE,CAAC;MACX;AACD,YAAO,IAAI,CAAC;KACZ,EACD,OAAO,CAAC,OAAO,CAAC,mBAAmB,CACnC,CAAC;IACF;;;AAAA,AAGD,UAAO,OAAO,CAAC;GACf;;;;;;;;;;AAAC,AAWF,SAAO,CAAC,eAAe,GAAG,YAAU;;;;AAInC,OACC,QAAQ,GAAG,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC;OAC1D,QAAQ;;;AAAC,AAGV,OAAK,CAAC,OAAO,CAAC,gBAAgB,CAAC,QAAQ,CAAC,EAAG;AAC1C,YAAQ,GAAG,QAAQ,CAAC;IACpB,MACI;AACJ,WAAO;IACP;;;;AAAA,AAID,OAAK,CAAC,QAAQ,EAAG;;AAEhB,YAAQ,GAAG,OAAO,CAAC,iBAAiB,EAAE,CAAC;IACvC;;;;AAAA,AAID,UAAO,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,EAAC,UAAU,CAAC;;;AAAC,AAG3C,UAAO,OAAO,CAAC;GACf;;;;;;;;;;AAAC,AAWF,SAAO,CAAC,IAAI,GAAG,UAAS,KAAK,EAAC;;;;AAI7B,OAAK,KAAK,KAAK,KAAK,IAAI,OAAO,CAAC,IAAI,EAAE,EAAG;;;AAGxC,WAAO,CAAC,SAAS,CAAC;AACjB,UAAK,EAAE,OAAO;AACd,aAAQ,EAAE,OAAO,CAAC,IAAI;AACtB,SAAI,EAAE,SAAS;AACf,UAAK,EAAE,KAAK;KACZ,CAAC,CAAC;AACH,WAAO,KAAK,CAAC;IACb;;;AAAA,AAGD,UAAO,CAAC,IAAI,CAAC,IAAI,CAAC;;;AAAC,AAGnB,UAAO,CAAC,WAAW,CAAC,YAAU;AAC7B,WAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IACpB,CAAC;;;AAAC,AAGH,UAAO,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;;;AAAC,AAGf,UAAO,IAAI,CAAC;GACZ;;;;;;;AAAC,AAOF,SAAO,CAAC,OAAO,GAAG,UAAS,KAAK,EAAC;;;;AAIhC,OAAK,KAAK,KAAK,KAAK,IAAI,OAAO,CAAC,IAAI,EAAE,EAAG;;;AAGxC,WAAO,CAAC,SAAS,CAAC;AACjB,UAAK,EAAE,OAAO;AACd,aAAQ,EAAE,OAAO,CAAC,OAAO;AACzB,SAAI,EAAE,SAAS;AACf,UAAK,EAAE,KAAK;KACZ,CAAC,CAAC;AACH,WAAO,KAAK,CAAC;IACb;;;AAAA,AAGD,UAAO,CAAC,IAAI,CAAC,IAAI,CAAC;;;AAAC,AAGnB,UAAO,CAAC,WAAW,CAAC,YAAU;AAC7B,WAAO,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;IACvB,CAAC;;;AAAC,AAGH,UAAO,CAAC,EAAE,CAAC,CAAC,CAAC;;;AAAC,AAGd,UAAO,IAAI,CAAC;GACZ;;;;;;;AAAC,AAOF,SAAO,CAAC,EAAE,GAAG,UAAS,KAAK,EAAC,KAAK,EAAC;;;;AAIjC,OAAI,CAAC;;;AAAC,AAGN,OAAK,KAAK,GAAG,CAAC,EAAG;;AAEhB,SAAM,CAAC,GAAC,CAAC,EAAE,CAAC,IAAE,KAAK,EAAE,EAAE,CAAC,EAAG;AAC1B,YAAO,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;KACvB;IACD,MACI,IAAK,KAAK,GAAG,CAAC,EAAG;;AAErB,SAAM,CAAC,GAAC,CAAC,CAAC,EAAE,CAAC,IAAE,KAAK,EAAE,EAAE,CAAC,EAAG;AAC3B,YAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KACpB;IACD,MACI;AACJ,UAAM,IAAI,KAAK,CAAC,wEAAwE,CAAC,CAAC;IAC1F;;;AAAA,AAGD,UAAO,OAAO,CAAC;GACf;;;;;;AAAC,AAOF,MAAK,OAAO,CAAC,QAAQ,CAAC,SAAS,EAAG;;;;;;AAMjC,OAAI,aAAa,GAAG,SAAhB,aAAa,GAAa,EAAE,CAAC;AACjC,UAAO,CAAC,SAAS,GAAG,OAAO,CAAC,SAAS,IAAE,aAAa,CAAC;AACrD,UAAO,CAAC,YAAY,GAAG,OAAO,CAAC,YAAY,IAAE,aAAa,CAAC;;;;AAC3D,OAGI;;;;;;;;;AASJ,WAAO,CAAC,UAAU,GAAG,UAAS,KAAK,EAAC,KAAK,EAAC;;AAEzC,SAAI,OAAO,GAAG,KAAK;SAAE,QAAQ,GAAG,KAAK;SAAE,WAAW;SAAE,YAAY;;;AAAC,AAGjE,YAAO,CAAC,mBAAmB,EAAE;;;AAAC,AAG9B,gBAAW,GAAG,OAAO,CAAC,OAAO,EAAE,CAAC;AAChC,SAAK,WAAW,EAAG;;AAElB,kBAAY,GAAG,OAAO,CAAC,YAAY,CAAC,WAAW,IAAE,OAAO,CAAC,eAAe,EAAE,EAAC,IAAI,CAAC,CAAC;AACjF,UAAK,YAAY,EAAG;;;;AAInB,cAAO,CAAC,YAAY,CAAC,YAAY,CAAC,IAAI,EAAE,YAAY,CAAC,KAAK,EAAE,YAAY,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;OACrF,MACI;;;AAGJ,cAAO,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,EAAC,cAAc,CAAC,CAAC;AAC/C,cAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;OACpB;;;AAAA,AAGD,aAAO,CAAC,eAAe,GAAG,KAAK,CAAC;AAChC,aAAO,KAAK,CAAC;MACb;;;AAAA,AAGD,YAAO,GAAG,OAAO,CAAC,OAAO,CAAC,gBAAgB,CAAC,OAAO,EAAC,KAAK,EAAC,KAAK,CAAC,IAAI,KAAK;;;AAAC,AAGzE,SAAK,OAAO,EAAG;;AAEd,cAAQ,GAAG,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;MACzC,MACI,IAAK,OAAO,CAAC,eAAe,EAAG;;AAEnC,cAAQ,GAAG,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC;MACzD,MACI;;AAEJ,cAAQ,GAAG,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC,CAAC;MAC3D;;;AAAA,AAGD,SAAK,CAAC,QAAQ,EAAG;;AAEhB,cAAQ,GAAG,OAAO,CAAC,iBAAiB,CAAC,IAAI,EAAC,IAAI,EAAC,OAAO,CAAC,eAAe,EAAE,CAAC,CAAC;MAC1E;;;AAAA,AAGD,YAAO,CAAC,eAAe,GAAG,KAAK;;;AAAC,AAGhC,SAAK,OAAO,CAAC,gBAAgB,CAAC,QAAQ,CAAC,EAAG;;;AAGzC,aAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AACpB,aAAO,KAAK,CAAC;MACb;;;AAAA,AAGD,YAAO,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;AAC7B,YAAO,CAAC,SAAS,CAAC,QAAQ,CAAC;;;AAAC,AAG5B,YAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC;;;AAAC,AAG3B,YAAO,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,EAAC,aAAa,CAAC,CAAC;AAC9C,YAAO,CAAC,IAAI,CAAC,KAAK,CAAC;;;AAAC,AAGpB,YAAO,IAAI,CAAC;KACZ,CAAC;AACF,WAAO,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,EAAC,UAAU,EAAC,OAAO,CAAC,UAAU,CAAC;;;;;;;;;;;AAAC,AAW3D,WAAO,CAAC,SAAS,GAAG,UAAS,IAAI,EAAC,KAAK,EAAC,GAAG,EAAC,KAAK,EAAC;;;;AAIjD,SAAK,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,OAAO,CAAC,QAAQ,CAAC,SAAS,EAAG;AAC9D,YAAM,IAAI,KAAK,CAAC,iFAAiF,CAAC,CAAC;MACnG;;;AAAA,AAGD,SAAK,KAAK,KAAK,KAAK,IAAI,OAAO,CAAC,IAAI,EAAE,EAAG;;;AAGxC,aAAO,CAAC,SAAS,CAAC;AACjB,YAAK,EAAE,OAAO;AACd,eAAQ,EAAE,OAAO,CAAC,SAAS;AAC3B,WAAI,EAAE,SAAS;AACf,YAAK,EAAE,KAAK;OACZ,CAAC,CAAC;AACH,aAAO,KAAK,CAAC;MACb;;;AAAA,AAGD,YAAO,CAAC,IAAI,CAAC,IAAI,CAAC;;;AAAC,AAGnB,SAAI,QAAQ,GAAG,OAAO,CAAC,iBAAiB,CAAC,IAAI,EAAC,KAAK,EAAC,GAAG,CAAC;;;AAAC,AAGzD,SAAK,OAAO,CAAC,gBAAgB,CAAC,QAAQ,CAAC,EAAG;;AAEzC,aAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;MACpB,MACI;;AAEJ,aAAO,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;AAC7B,aAAO,CAAC,eAAe,GAAG,QAAQ,CAAC,EAAE;;;AAAC,AAGtC,aAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,EAAE,EAAC,QAAQ,CAAC,KAAK,EAAC,QAAQ,CAAC,GAAG,CAAC;;;AAAC,AAG3D,aAAO,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,EAAC,UAAU,CAAC,CAAC;MAC3C;;;AAAA,AAGD,YAAO,IAAI,CAAC;KACZ;;;;;;;;;;;AAAC,AAWF,WAAO,CAAC,YAAY,GAAG,UAAS,IAAI,EAAC,KAAK,EAAC,GAAG,EAAC,KAAK,EAAC;;;;AAIpD,SAAK,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,OAAO,CAAC,QAAQ,CAAC,SAAS,EAAG;AAC9D,YAAM,IAAI,KAAK,CAAC,iFAAiF,CAAC,CAAC;MACnG;;;AAAA,AAGD,SAAK,KAAK,KAAK,KAAK,IAAI,OAAO,CAAC,IAAI,EAAE,EAAG;;;AAGxC,aAAO,CAAC,SAAS,CAAC;AACjB,YAAK,EAAE,OAAO;AACd,eAAQ,EAAE,OAAO,CAAC,YAAY;AAC9B,WAAI,EAAE,SAAS;AACf,YAAK,EAAE,KAAK;OACZ,CAAC,CAAC;AACH,aAAO,KAAK,CAAC;MACb;;;AAAA,AAGD,YAAO,CAAC,IAAI,CAAC,IAAI,CAAC;;;AAAC,AAGnB,SAAI,QAAQ,GAAG,OAAO,CAAC,iBAAiB,CAAC,IAAI,EAAC,KAAK,EAAC,GAAG,CAAC;;;AAAC,AAGzD,SAAK,OAAO,CAAC,gBAAgB,CAAC,QAAQ,CAAC,EAAG;;AAEzC,aAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;MACpB,MACI;;AAEJ,aAAO,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;AAC7B,aAAO,CAAC,eAAe,GAAG,QAAQ,CAAC,EAAE;;;AAAC,AAGtC,aAAO,CAAC,YAAY,CAAC,QAAQ,CAAC,EAAE,EAAC,QAAQ,CAAC,KAAK,EAAC,QAAQ,CAAC,GAAG,CAAC;;;AAAC,AAG9D,aAAO,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,EAAC,UAAU,CAAC,CAAC;MAC3C;;;AAAA,AAGD,YAAO,IAAI,CAAC;KACZ,CAAC;IAEF;;;;;;;;AAAA,AASD,MAAK,cAAc,EAAG;;AAErB,OAAI;AACH,WAAO,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,IAAE,EAAE,CAAC;IACxE,CACD,OAAQ,GAAG,EAAG;AACb,WAAO,CAAC,KAAK,GAAG,EAAE,CAAC;IACnB;;;AAAA,AAGD,UAAO,CAAC,cAAc,EAAE,CAAC;GACzB,MACI;;AAEJ,UAAO,CAAC,KAAK,GAAG,EAAE,CAAC;AACnB,UAAO,CAAC,cAAc,EAAE,CAAC;GACzB;;;;;AAAA,AAKD,SAAO,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,EAAC,QAAQ,EAAC,OAAO,CAAC,iBAAiB,CAAC;;;;;AAAC,AAKhE,SAAO,CAAC,SAAS,CAAC,OAAO,CAAC,UAAU,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,eAAe,EAAE,EAAC,IAAI,CAAC,CAAC,CAAC;;;;;AAAC,AAK5F,MAAK,cAAc,EAAG;;AAErB,UAAO,CAAC,QAAQ,GAAG,YAAU;;AAE5B,QAAI,YAAY,EAAE,IAAI,EAAE,kBAAkB;;;AAAC,AAG3C,QAAI;AACH,iBAAY,GAAG,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,IAAE,EAAE,CAAC;KACvE,CACD,OAAQ,GAAG,EAAG;AACb,iBAAY,GAAG,EAAE,CAAC;KAClB;;;AAAA,AAGD,gBAAY,CAAC,SAAS,GAAG,YAAY,CAAC,SAAS,IAAI,EAAE,CAAC;AACtD,gBAAY,CAAC,OAAO,GAAG,YAAY,CAAC,OAAO,IAAI,EAAE,CAAC;AAClD,gBAAY,CAAC,SAAS,GAAG,YAAY,CAAC,SAAS,IAAI,EAAE;;;AAAC,AAGtD,SAAM,IAAI,IAAI,OAAO,CAAC,SAAS,EAAG;AACjC,SAAK,CAAC,OAAO,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,EAAG;AAC9C,eAAS;MACT;AACD,iBAAY,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;KACvD;AACD,SAAM,IAAI,IAAI,OAAO,CAAC,OAAO,EAAG;AAC/B,SAAK,CAAC,OAAO,CAAC,OAAO,CAAC,cAAc,CAAC,IAAI,CAAC,EAAG;AAC5C,eAAS;MACT;AACD,iBAAY,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;KACnD;AACD,SAAM,IAAI,IAAI,OAAO,CAAC,SAAS,EAAG;AACjC,SAAK,CAAC,OAAO,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,EAAG;AAC9C,eAAS;MACT;AACD,iBAAY,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;KACvD;;;AAAA,AAGD,WAAO,CAAC,KAAK,GAAG,YAAY,CAAC;AAC7B,WAAO,CAAC,cAAc,EAAE;;;;;;;;AAAC,AAQzB,sBAAkB,GAAG,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC;AAClD,QAAI;;AAEH,mBAAc,CAAC,OAAO,CAAC,eAAe,EAAE,kBAAkB,CAAC,CAAC;KAC5D,CACD,OAAO,CAAC,EAAE;AACT,SAAI,CAAC,CAAC,IAAI,KAAK,YAAY,CAAC,kBAAkB,EAAE;AAC/C,UAAI,cAAc,CAAC,MAAM,EAAE;;;AAG1B,qBAAc,CAAC,UAAU,CAAC,eAAe,CAAC,CAAC;AAC3C,qBAAc,CAAC,OAAO,CAAC,eAAe,EAAE,kBAAkB,CAAC,CAAC;OAC5D,MAAM;;OAEN;MACD,MAAM;AACN,aAAM,CAAC,CAAC;OACR;KACD;IACD;;;AAAC,AAGF,UAAO,CAAC,YAAY,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,QAAQ,EAAC,OAAO,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;;;AAAC,AAGvF,UAAO,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,EAAC,cAAc,EAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC7D,UAAO,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,EAAC,QAAQ,EAAC,OAAO,CAAC,QAAQ,CAAC;;;AAAC,GAGvD;;;AAAA,AAGD,MAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,SAAS,EAAG;;;;;;;;AAQlC,OAAK,OAAO,CAAC,IAAI,CAAC,UAAU,EAAG;AAC9B,WAAO,CAAC,YAAY,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,eAAe,EAAE,OAAO,CAAC,OAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC;IACpG;;;;;AAAA,AAKD,OAAK,SAAS,CAAC,MAAM,KAAK,sBAAsB,IAAI,CAAC,SAAS,CAAC,WAAW,IAAE,EAAE,CAAA,KAAM,SAAS,EAAG;;;;;;AAM/F,WAAO,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,EAAC,YAAY,EAAC,YAAU;AAClD,YAAO,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,EAAC,UAAU,CAAC,CAAC;KAC3C,CAAC;;;AAAC,AAGH,QAAK,OAAO,CAAC,OAAO,EAAE,EAAG;AACxB,YAAO,CAAC,OAAO,CAAC,SAAS,CAAC,YAAU;AACnC,aAAO,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,EAAC,YAAY,CAAC,CAAC;MAC7C,CAAC,CAAC;KACH;IACD;GAED;EAGD;AAHC;;AAGA,AAGF,KAAI,CAAC,OAAO,CAAC,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,SAAS,EAAE;AACnD,SAAO,CAAC,IAAI,EAAE,CAAC;EACf;CAED,CAAA,CAAE,MAAM,CAAC,CAAC","file":"zepto.history-compiled.js","sourcesContent":["/**\n * History.js Zepto Adapter\n * @author Benjamin Arthur Lupton <contact@balupton.com>\n * @copyright 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>\n * @license New BSD License <http://creativecommons.org/licenses/BSD/>\n */\n\n// Closure\n(function(window,undefined){\n\t\"use strict\";\n\n\t// Localise Globals\n\tvar\n\t\tHistory = window.History = window.History||{},\n\t\tZepto = window.Zepto;\n\n\t// Check Existence\n\tif ( typeof History.Adapter !== 'undefined' ) {\n\t\tthrow new Error('History.js Adapter has already been loaded...');\n\t}\n\n\t// Add the Adapter\n\tHistory.Adapter = {\n\t\t/**\n\t\t * History.Adapter.bind(el,event,callback)\n\t\t * @param {Element|string} el\n\t\t * @param {string} event - custom and standard events\n\t\t * @param {function} callback\n\t\t * @return {void}\n\t\t */\n\t\tbind: function(el,event,callback){\n\t\t\tnew Zepto(el).bind(event,callback);\n\t\t},\n\n\t\t/**\n\t\t * History.Adapter.trigger(el,event)\n\t\t * @param {Element|string} el\n\t\t * @param {string} event - custom and standard events\n\t\t * @return {void}\n\t\t */\n\t\ttrigger: function(el,event){\n\t\t\tnew Zepto(el).trigger(event);\n\t\t},\n\n\t\t/**\n\t\t * History.Adapter.extractEventData(key,event,extra)\n\t\t * @param {string} key - key for the event data to extract\n\t\t * @param {string} event - custom and standard events\n\t\t * @return {mixed}\n\t\t */\n\t\textractEventData: function(key,event){\n\t\t\t// Zepto Native\n\t\t\tvar result = (event && event[key]) || undefined;\n\n\t\t\t// Return\n\t\t\treturn result;\n\t\t},\n\n\t\t/**\n\t\t * History.Adapter.onDomLoad(callback)\n\t\t * @param {function} callback\n\t\t * @return {void}\n\t\t */\n\t\tonDomLoad: function(callback) {\n\t\t\tnew Zepto(callback);\n\t\t}\n\t};\n\n\t// Try and Initialise History\n\tif ( typeof History.init !== 'undefined' ) {\n\t\tHistory.init();\n\t}\n\n})(window);\n/**\n * History.js Core\n * @author Benjamin Arthur Lupton <contact@balupton.com>\n * @copyright 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>\n * @license New BSD License <http://creativecommons.org/licenses/BSD/>\n */\n\n(function(window,undefined){\n\t\"use strict\";\n\n\t// ========================================================================\n\t// Initialise\n\n\t// Localise Globals\n\tvar\n\t\tconsole = window.console||undefined, // Prevent a JSLint complain\n\t\tdocument = window.document, // Make sure we are using the correct document\n\t\tnavigator = window.navigator, // Make sure we are using the correct navigator\n\t\tsessionStorage = window.sessionStorage||false, // sessionStorage\n\t\tsetTimeout = window.setTimeout,\n\t\tclearTimeout = window.clearTimeout,\n\t\tsetInterval = window.setInterval,\n\t\tclearInterval = window.clearInterval,\n\t\tJSON = window.JSON,\n\t\talert = window.alert,\n\t\tHistory = window.History = window.History||{}, // Public History Object\n\t\thistory = window.history; // Old History Object\n\n\ttry {\n\t\tsessionStorage.setItem('TEST', '1');\n\t\tsessionStorage.removeItem('TEST');\n\t} catch(e) {\n\t\tsessionStorage = false;\n\t}\n\n\t// MooTools Compatibility\n\tJSON.stringify = JSON.stringify||JSON.encode;\n\tJSON.parse = JSON.parse||JSON.decode;\n\n\t// Check Existence\n\tif ( typeof History.init !== 'undefined' ) {\n\t\tthrow new Error('History.js Core has already been loaded...');\n\t}\n\n\t// Initialise History\n\tHistory.init = function(options){\n\t\t// Check Load Status of Adapter\n\t\tif ( typeof History.Adapter === 'undefined' ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Check Load Status of Core\n\t\tif ( typeof History.initCore !== 'undefined' ) {\n\t\t\tHistory.initCore();\n\t\t}\n\n\t\t// Check Load Status of HTML4 Support\n\t\tif ( typeof History.initHtml4 !== 'undefined' ) {\n\t\t\tHistory.initHtml4();\n\t\t}\n\n\t\t// Return true\n\t\treturn true;\n\t};\n\n\n\t// ========================================================================\n\t// Initialise Core\n\n\t// Initialise Core\n\tHistory.initCore = function(options){\n\t\t// Initialise\n\t\tif ( typeof History.initCore.initialized !== 'undefined' ) {\n\t\t\t// Already Loaded\n\t\t\treturn false;\n\t\t}\n\t\telse {\n\t\t\tHistory.initCore.initialized = true;\n\t\t}\n\n\n\t\t// ====================================================================\n\t\t// Options\n\n\t\t/**\n\t\t * History.options\n\t\t * Configurable options\n\t\t */\n\t\tHistory.options = History.options||{};\n\n\t\t/**\n\t\t * History.options.hashChangeInterval\n\t\t * How long should the interval be before hashchange checks\n\t\t */\n\t\tHistory.options.hashChangeInterval = History.options.hashChangeInterval || 100;\n\n\t\t/**\n\t\t * History.options.safariPollInterval\n\t\t * How long should the interval be before safari poll checks\n\t\t */\n\t\tHistory.options.safariPollInterval = History.options.safariPollInterval || 500;\n\n\t\t/**\n\t\t * History.options.doubleCheckInterval\n\t\t * How long should the interval be before we perform a double check\n\t\t */\n\t\tHistory.options.doubleCheckInterval = History.options.doubleCheckInterval || 500;\n\n\t\t/**\n\t\t * History.options.disableSuid\n\t\t * Force History not to append suid\n\t\t */\n\t\tHistory.options.disableSuid = History.options.disableSuid || false;\n\n\t\t/**\n\t\t * History.options.storeInterval\n\t\t * How long should we wait between store calls\n\t\t */\n\t\tHistory.options.storeInterval = History.options.storeInterval || 1000;\n\n\t\t/**\n\t\t * History.options.busyDelay\n\t\t * How long should we wait between busy events\n\t\t */\n\t\tHistory.options.busyDelay = History.options.busyDelay || 250;\n\n\t\t/**\n\t\t * History.options.debug\n\t\t * If true will enable debug messages to be logged\n\t\t */\n\t\tHistory.options.debug = History.options.debug || false;\n\n\t\t/**\n\t\t * History.options.initialTitle\n\t\t * What is the title of the initial state\n\t\t */\n\t\tHistory.options.initialTitle = History.options.initialTitle || document.title;\n\n\t\t/**\n\t\t * History.options.html4Mode\n\t\t * If true, will force HTMl4 mode (hashtags)\n\t\t */\n\t\tHistory.options.html4Mode = History.options.html4Mode || false;\n\n\t\t/**\n\t\t * History.options.delayInit\n\t\t * Want to override default options and call init manually.\n\t\t */\n\t\tHistory.options.delayInit = History.options.delayInit || false;\n\n\n\t\t// ====================================================================\n\t\t// Interval record\n\n\t\t/**\n\t\t * History.intervalList\n\t\t * List of intervals set, to be cleared when document is unloaded.\n\t\t */\n\t\tHistory.intervalList = [];\n\n\t\t/**\n\t\t * History.clearAllIntervals\n\t\t * Clears all setInterval instances.\n\t\t */\n\t\tHistory.clearAllIntervals = function(){\n\t\t\tvar i, il = History.intervalList;\n\t\t\tif (typeof il !== \"undefined\" && il !== null) {\n\t\t\t\tfor (i = 0; i < il.length; i++) {\n\t\t\t\t\tclearInterval(il[i]);\n\t\t\t\t}\n\t\t\t\tHistory.intervalList = null;\n\t\t\t}\n\t\t};\n\n\n\t\t// ====================================================================\n\t\t// Debug\n\n\t\t/**\n\t\t * History.debug(message,...)\n\t\t * Logs the passed arguments if debug enabled\n\t\t */\n\t\tHistory.debug = function(){\n\t\t\tif ( (History.options.debug||false) ) {\n\t\t\t\tHistory.log.apply(History,arguments);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * History.log(message,...)\n\t\t * Logs the passed arguments\n\t\t */\n\t\tHistory.log = function(){\n\t\t\t// Prepare\n\t\t\tvar\n\t\t\t\tconsoleExists = !(typeof console === 'undefined' || typeof console.log === 'undefined' || typeof console.log.apply === 'undefined'),\n\t\t\t\ttextarea = document.getElementById('log'),\n\t\t\t\tmessage,\n\t\t\t\ti,n,\n\t\t\t\targs,arg\n\t\t\t\t;\n\n\t\t\t// Write to Console\n\t\t\tif ( consoleExists ) {\n\t\t\t\targs = Array.prototype.slice.call(arguments);\n\t\t\t\tmessage = args.shift();\n\t\t\t\tif ( typeof console.debug !== 'undefined' ) {\n\t\t\t\t\tconsole.debug.apply(console,[message,args]);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tconsole.log.apply(console,[message,args]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tmessage = (\"\\n\"+arguments[0]+\"\\n\");\n\t\t\t}\n\n\t\t\t// Write to log\n\t\t\tfor ( i=1,n=arguments.length; i<n; ++i ) {\n\t\t\t\targ = arguments[i];\n\t\t\t\tif ( typeof arg === 'object' && typeof JSON !== 'undefined' ) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\targ = JSON.stringify(arg);\n\t\t\t\t\t}\n\t\t\t\t\tcatch ( Exception ) {\n\t\t\t\t\t\t// Recursive Object\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tmessage += \"\\n\"+arg+\"\\n\";\n\t\t\t}\n\n\t\t\t// Textarea\n\t\t\tif ( textarea ) {\n\t\t\t\ttextarea.value += message+\"\\n-----\\n\";\n\t\t\t\ttextarea.scrollTop = textarea.scrollHeight - textarea.clientHeight;\n\t\t\t}\n\t\t\t// No Textarea, No Console\n\t\t\telse if ( !consoleExists ) {\n\t\t\t\talert(message);\n\t\t\t}\n\n\t\t\t// Return true\n\t\t\treturn true;\n\t\t};\n\n\n\t\t// ====================================================================\n\t\t// Emulated Status\n\n\t\t/**\n\t\t * History.getInternetExplorerMajorVersion()\n\t\t * Get's the major version of Internet Explorer\n\t\t * @return {integer}\n\t\t * @license Public Domain\n\t\t * @author Benjamin Arthur Lupton <contact@balupton.com>\n\t\t * @author James Padolsey <https://gist.github.com/527683>\n\t\t */\n\t\tHistory.getInternetExplorerMajorVersion = function(){\n\t\t\tvar result = History.getInternetExplorerMajorVersion.cached =\n\t\t\t\t\t(typeof History.getInternetExplorerMajorVersion.cached !== 'undefined')\n\t\t\t\t?\tHistory.getInternetExplorerMajorVersion.cached\n\t\t\t\t:\t(function(){\n\t\t\t\t\t\tvar v = 3,\n\t\t\t\t\t\t\t\tdiv = document.createElement('div'),\n\t\t\t\t\t\t\t\tall = div.getElementsByTagName('i');\n\t\t\t\t\t\twhile ( (div.innerHTML = '<!--[if gt IE ' + (++v) + ']><i></i><![endif]-->') && all[0] ) {}\n\t\t\t\t\t\treturn (v > 4) ? v : false;\n\t\t\t\t\t})()\n\t\t\t\t;\n\t\t\treturn result;\n\t\t};\n\n\t\t/**\n\t\t * History.isInternetExplorer()\n\t\t * Are we using Internet Explorer?\n\t\t * @return {boolean}\n\t\t * @license Public Domain\n\t\t * @author Benjamin Arthur Lupton <contact@balupton.com>\n\t\t */\n\t\tHistory.isInternetExplorer = function(){\n\t\t\tvar result =\n\t\t\t\tHistory.isInternetExplorer.cached =\n\t\t\t\t(typeof History.isInternetExplorer.cached !== 'undefined')\n\t\t\t\t\t?\tHistory.isInternetExplorer.cached\n\t\t\t\t\t:\tBoolean(History.getInternetExplorerMajorVersion())\n\t\t\t\t;\n\t\t\treturn result;\n\t\t};\n\n\t\t/**\n\t\t * History.emulated\n\t\t * Which features require emulating?\n\t\t */\n\n\t\tif (History.options.html4Mode) {\n\t\t\tHistory.emulated = {\n\t\t\t\tpushState : true,\n\t\t\t\thashChange: true\n\t\t\t};\n\t\t}\n\n\t\telse {\n\n\t\t\tHistory.emulated = {\n\t\t\t\tpushState: !Boolean(\n\t\t\t\t\twindow.history && window.history.pushState && window.history.replaceState\n\t\t\t\t\t&& !(\n\t\t\t\t\t\t(/ Mobile\\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i).test(navigator.userAgent) /* disable for versions of iOS before version 4.3 (8F190) */\n\t\t\t\t\t\t|| (/AppleWebKit\\/5([0-2]|3[0-2])/i).test(navigator.userAgent) /* disable for the mercury iOS browser, or at least older versions of the webkit engine */\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t\t\thashChange: Boolean(\n\t\t\t\t\t!(('onhashchange' in window) || ('onhashchange' in document))\n\t\t\t\t\t||\n\t\t\t\t\t(History.isInternetExplorer() && History.getInternetExplorerMajorVersion() < 8)\n\t\t\t\t)\n\t\t\t};\n\t\t}\n\n\t\t/**\n\t\t * History.enabled\n\t\t * Is History enabled?\n\t\t */\n\t\tHistory.enabled = !History.emulated.pushState;\n\n\t\t/**\n\t\t * History.bugs\n\t\t * Which bugs are present\n\t\t */\n\t\tHistory.bugs = {\n\t\t\t/**\n\t\t\t * Safari 5 and Safari iOS 4 fail to return to the correct state once a hash is replaced by a `replaceState` call\n\t\t\t * https://bugs.webkit.org/show_bug.cgi?id=56249\n\t\t\t */\n\t\t\tsetHash: Boolean(!History.emulated.pushState && navigator.vendor === 'Apple Computer, Inc.' && /AppleWebKit\\/5([0-2]|3[0-3])/.test(navigator.userAgent)),\n\n\t\t\t/**\n\t\t\t * Safari 5 and Safari iOS 4 sometimes fail to apply the state change under busy conditions\n\t\t\t * https://bugs.webkit.org/show_bug.cgi?id=42940\n\t\t\t */\n\t\t\tsafariPoll: Boolean(!History.emulated.pushState && navigator.vendor === 'Apple Computer, Inc.' && /AppleWebKit\\/5([0-2]|3[0-3])/.test(navigator.userAgent)),\n\n\t\t\t/**\n\t\t\t * MSIE 6 and 7 sometimes do not apply a hash even it was told to (requiring a second call to the apply function)\n\t\t\t */\n\t\t\tieDoubleCheck: Boolean(History.isInternetExplorer() && History.getInternetExplorerMajorVersion() < 8),\n\n\t\t\t/**\n\t\t\t * MSIE 6 requires the entire hash to be encoded for the hashes to trigger the onHashChange event\n\t\t\t */\n\t\t\thashEscape: Boolean(History.isInternetExplorer() && History.getInternetExplorerMajorVersion() < 7)\n\t\t};\n\n\t\t/**\n\t\t * History.isEmptyObject(obj)\n\t\t * Checks to see if the Object is Empty\n\t\t * @param {Object} obj\n\t\t * @return {boolean}\n\t\t */\n\t\tHistory.isEmptyObject = function(obj) {\n\t\t\tfor ( var name in obj ) {\n\t\t\t\tif ( obj.hasOwnProperty(name) ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t};\n\n\t\t/**\n\t\t * History.cloneObject(obj)\n\t\t * Clones a object and eliminate all references to the original contexts\n\t\t * @param {Object} obj\n\t\t * @return {Object}\n\t\t */\n\t\tHistory.cloneObject = function(obj) {\n\t\t\tvar hash,newObj;\n\t\t\tif ( obj ) {\n\t\t\t\thash = JSON.stringify(obj);\n\t\t\t\tnewObj = JSON.parse(hash);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tnewObj = {};\n\t\t\t}\n\t\t\treturn newObj;\n\t\t};\n\n\n\t\t// ====================================================================\n\t\t// URL Helpers\n\n\t\t/**\n\t\t * History.getRootUrl()\n\t\t * Turns \"http://mysite.com/dir/page.html?asd\" into \"http://mysite.com\"\n\t\t * @return {String} rootUrl\n\t\t */\n\t\tHistory.getRootUrl = function(){\n\t\t\t// Create\n\t\t\tvar rootUrl = document.location.protocol+'//'+(document.location.hostname||document.location.host);\n\t\t\tif ( document.location.port||false ) {\n\t\t\t\trootUrl += ':'+document.location.port;\n\t\t\t}\n\t\t\trootUrl += '/';\n\n\t\t\t// Return\n\t\t\treturn rootUrl;\n\t\t};\n\n\t\t/**\n\t\t * History.getBaseHref()\n\t\t * Fetches the `href` attribute of the `<base href=\"...\">` element if it exists\n\t\t * @return {String} baseHref\n\t\t */\n\t\tHistory.getBaseHref = function(){\n\t\t\t// Create\n\t\t\tvar\n\t\t\t\tbaseElements = document.getElementsByTagName('base'),\n\t\t\t\tbaseElement = null,\n\t\t\t\tbaseHref = '';\n\n\t\t\t// Test for Base Element\n\t\t\tif ( baseElements.length === 1 ) {\n\t\t\t\t// Prepare for Base Element\n\t\t\t\tbaseElement = baseElements[0];\n\t\t\t\tbaseHref = baseElement.href.replace(/[^\\/]+$/,'');\n\t\t\t}\n\n\t\t\t// Adjust trailing slash\n\t\t\tbaseHref = baseHref.replace(/\\/+$/,'');\n\t\t\tif ( baseHref ) baseHref += '/';\n\n\t\t\t// Return\n\t\t\treturn baseHref;\n\t\t};\n\n\t\t/**\n\t\t * History.getBaseUrl()\n\t\t * Fetches the baseHref or basePageUrl or rootUrl (whichever one exists first)\n\t\t * @return {String} baseUrl\n\t\t */\n\t\tHistory.getBaseUrl = function(){\n\t\t\t// Create\n\t\t\tvar baseUrl = History.getBaseHref()||History.getBasePageUrl()||History.getRootUrl();\n\n\t\t\t// Return\n\t\t\treturn baseUrl;\n\t\t};\n\n\t\t/**\n\t\t * History.getPageUrl()\n\t\t * Fetches the URL of the current page\n\t\t * @return {String} pageUrl\n\t\t */\n\t\tHistory.getPageUrl = function(){\n\t\t\t// Fetch\n\t\t\tvar\n\t\t\t\tState = History.getState(false,false),\n\t\t\t\tstateUrl = (State||{}).url||History.getLocationHref(),\n\t\t\t\tpageUrl;\n\n\t\t\t// Create\n\t\t\tpageUrl = stateUrl.replace(/\\/+$/,'').replace(/[^\\/]+$/,function(part,index,string){\n\t\t\t\treturn (/\\./).test(part) ? part : part+'/';\n\t\t\t});\n\n\t\t\t// Return\n\t\t\treturn pageUrl;\n\t\t};\n\n\t\t/**\n\t\t * History.getBasePageUrl()\n\t\t * Fetches the Url of the directory of the current page\n\t\t * @return {String} basePageUrl\n\t\t */\n\t\tHistory.getBasePageUrl = function(){\n\t\t\t// Create\n\t\t\tvar basePageUrl = (History.getLocationHref()).replace(/[#\\?].*/,'').replace(/[^\\/]+$/,function(part,index,string){\n\t\t\t\treturn (/[^\\/]$/).test(part) ? '' : part;\n\t\t\t}).replace(/\\/+$/,'')+'/';\n\n\t\t\t// Return\n\t\t\treturn basePageUrl;\n\t\t};\n\n\t\t/**\n\t\t * History.getFullUrl(url)\n\t\t * Ensures that we have an absolute URL and not a relative URL\n\t\t * @param {string} url\n\t\t * @param {Boolean} allowBaseHref\n\t\t * @return {string} fullUrl\n\t\t */\n\t\tHistory.getFullUrl = function(url,allowBaseHref){\n\t\t\t// Prepare\n\t\t\tvar fullUrl = url, firstChar = url.substring(0,1);\n\t\t\tallowBaseHref = (typeof allowBaseHref === 'undefined') ? true : allowBaseHref;\n\n\t\t\t// Check\n\t\t\tif ( /[a-z]+\\:\\/\\//.test(url) ) {\n\t\t\t\t// Full URL\n\t\t\t}\n\t\t\telse if ( firstChar === '/' ) {\n\t\t\t\t// Root URL\n\t\t\t\tfullUrl = History.getRootUrl()+url.replace(/^\\/+/,'');\n\t\t\t}\n\t\t\telse if ( firstChar === '#' ) {\n\t\t\t\t// Anchor URL\n\t\t\t\tfullUrl = History.getPageUrl().replace(/#.*/,'')+url;\n\t\t\t}\n\t\t\telse if ( firstChar === '?' ) {\n\t\t\t\t// Query URL\n\t\t\t\tfullUrl = History.getPageUrl().replace(/[\\?#].*/,'')+url;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Relative URL\n\t\t\t\tif ( allowBaseHref ) {\n\t\t\t\t\tfullUrl = History.getBaseUrl()+url.replace(/^(\\.\\/)+/,'');\n\t\t\t\t} else {\n\t\t\t\t\tfullUrl = History.getBasePageUrl()+url.replace(/^(\\.\\/)+/,'');\n\t\t\t\t}\n\t\t\t\t// We have an if condition above as we do not want hashes\n\t\t\t\t// which are relative to the baseHref in our URLs\n\t\t\t\t// as if the baseHref changes, then all our bookmarks\n\t\t\t\t// would now point to different locations\n\t\t\t\t// whereas the basePageUrl will always stay the same\n\t\t\t}\n\n\t\t\t// Return\n\t\t\treturn fullUrl.replace(/\\#$/,'');\n\t\t};\n\n\t\t/**\n\t\t * History.getShortUrl(url)\n\t\t * Ensures that we have a relative URL and not a absolute URL\n\t\t * @param {string} url\n\t\t * @return {string} url\n\t\t */\n\t\tHistory.getShortUrl = function(url){\n\t\t\t// Prepare\n\t\t\tvar shortUrl = url, baseUrl = History.getBaseUrl(), rootUrl = History.getRootUrl();\n\n\t\t\t// Trim baseUrl\n\t\t\tif ( History.emulated.pushState ) {\n\t\t\t\t// We are in a if statement as when pushState is not emulated\n\t\t\t\t// The actual url these short urls are relative to can change\n\t\t\t\t// So within the same session, we the url may end up somewhere different\n\t\t\t\tshortUrl = shortUrl.replace(baseUrl,'');\n\t\t\t}\n\n\t\t\t// Trim rootUrl\n\t\t\tshortUrl = shortUrl.replace(rootUrl,'/');\n\n\t\t\t// Ensure we can still detect it as a state\n\t\t\tif ( History.isTraditionalAnchor(shortUrl) ) {\n\t\t\t\tshortUrl = './'+shortUrl;\n\t\t\t}\n\n\t\t\t// Clean It\n\t\t\tshortUrl = shortUrl.replace(/^(\\.\\/)+/g,'./').replace(/\\#$/,'');\n\n\t\t\t// Return\n\t\t\treturn shortUrl;\n\t\t};\n\n\t\t/**\n\t\t * History.getLocationHref(document)\n\t\t * Returns a normalized version of document.location.href\n\t\t * accounting for browser inconsistencies, etc.\n\t\t *\n\t\t * This URL will be URI-encoded and will include the hash\n\t\t *\n\t\t * @param {object} document\n\t\t * @return {string} url\n\t\t */\n\t\tHistory.getLocationHref = function(doc) {\n\t\t\tdoc = doc || document;\n\n\t\t\t// most of the time, this will be true\n\t\t\tif (doc.URL === doc.location.href)\n\t\t\t\treturn doc.location.href;\n\n\t\t\t// some versions of webkit URI-decode document.location.href\n\t\t\t// but they leave document.URL in an encoded state\n\t\t\tif (doc.location.href === decodeURIComponent(doc.URL))\n\t\t\t\treturn doc.URL;\n\n\t\t\t// FF 3.6 only updates document.URL when a page is reloaded\n\t\t\t// document.location.href is updated correctly\n\t\t\tif (doc.location.hash && decodeURIComponent(doc.location.href.replace(/^[^#]+/, \"\")) === doc.location.hash)\n\t\t\t\treturn doc.location.href;\n\n\t\t\tif (doc.URL.indexOf('#') == -1 && doc.location.href.indexOf('#') != -1)\n\t\t\t\treturn doc.location.href;\n\n\t\t\treturn doc.URL || doc.location.href;\n\t\t};\n\n\n\t\t// ====================================================================\n\t\t// State Storage\n\n\t\t/**\n\t\t * History.store\n\t\t * The store for all session specific data\n\t\t */\n\t\tHistory.store = {};\n\n\t\t/**\n\t\t * History.idToState\n\t\t * 1-1: State ID to State Object\n\t\t */\n\t\tHistory.idToState = History.idToState||{};\n\n\t\t/**\n\t\t * History.stateToId\n\t\t * 1-1: State String to State ID\n\t\t */\n\t\tHistory.stateToId = History.stateToId||{};\n\n\t\t/**\n\t\t * History.urlToId\n\t\t * 1-1: State URL to State ID\n\t\t */\n\t\tHistory.urlToId = History.urlToId||{};\n\n\t\t/**\n\t\t * History.storedStates\n\t\t * Store the states in an array\n\t\t */\n\t\tHistory.storedStates = History.storedStates||[];\n\n\t\t/**\n\t\t * History.savedStates\n\t\t * Saved the states in an array\n\t\t */\n\t\tHistory.savedStates = History.savedStates||[];\n\n\t\t/**\n\t\t * History.noramlizeStore()\n\t\t * Noramlize the store by adding necessary values\n\t\t */\n\t\tHistory.normalizeStore = function(){\n\t\t\tHistory.store.idToState = History.store.idToState||{};\n\t\t\tHistory.store.urlToId = History.store.urlToId||{};\n\t\t\tHistory.store.stateToId = History.store.stateToId||{};\n\t\t};\n\n\t\t/**\n\t\t * History.getState()\n\t\t * Get an object containing the data, title and url of the current state\n\t\t * @param {Boolean} friendly\n\t\t * @param {Boolean} create\n\t\t * @return {Object} State\n\t\t */\n\t\tHistory.getState = function(friendly,create){\n\t\t\t// Prepare\n\t\t\tif ( typeof friendly === 'undefined' ) { friendly = true; }\n\t\t\tif ( typeof create === 'undefined' ) { create = true; }\n\n\t\t\t// Fetch\n\t\t\tvar State = History.getLastSavedState();\n\n\t\t\t// Create\n\t\t\tif ( !State && create ) {\n\t\t\t\tState = History.createStateObject();\n\t\t\t}\n\n\t\t\t// Adjust\n\t\t\tif ( friendly ) {\n\t\t\t\tState = History.cloneObject(State);\n\t\t\t\tState.url = State.cleanUrl||State.url;\n\t\t\t}\n\n\t\t\t// Return\n\t\t\treturn State;\n\t\t};\n\n\t\t/**\n\t\t * History.getIdByState(State)\n\t\t * Gets a ID for a State\n\t\t * @param {State} newState\n\t\t * @return {String} id\n\t\t */\n\t\tHistory.getIdByState = function(newState){\n\n\t\t\t// Fetch ID\n\t\t\tvar id = History.extractId(newState.url),\n\t\t\t\tstr;\n\n\t\t\tif ( !id ) {\n\t\t\t\t// Find ID via State String\n\t\t\t\tstr = History.getStateString(newState);\n\t\t\t\tif ( typeof History.stateToId[str] !== 'undefined' ) {\n\t\t\t\t\tid = History.stateToId[str];\n\t\t\t\t}\n\t\t\t\telse if ( typeof History.store.stateToId[str] !== 'undefined' ) {\n\t\t\t\t\tid = History.store.stateToId[str];\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// Generate a new ID\n\t\t\t\t\twhile ( true ) {\n\t\t\t\t\t\tid = (new Date()).getTime() + String(Math.random()).replace(/\\D/g,'');\n\t\t\t\t\t\tif ( typeof History.idToState[id] === 'undefined' && typeof History.store.idToState[id] === 'undefined' ) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Apply the new State to the ID\n\t\t\t\t\tHistory.stateToId[str] = id;\n\t\t\t\t\tHistory.idToState[id] = newState;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Return ID\n\t\t\treturn id;\n\t\t};\n\n\t\t/**\n\t\t * History.normalizeState(State)\n\t\t * Expands a State Object\n\t\t * @param {object} State\n\t\t * @return {object}\n\t\t */\n\t\tHistory.normalizeState = function(oldState){\n\t\t\t// Variables\n\t\t\tvar newState, dataNotEmpty;\n\n\t\t\t// Prepare\n\t\t\tif ( !oldState || (typeof oldState !== 'object') ) {\n\t\t\t\toldState = {};\n\t\t\t}\n\n\t\t\t// Check\n\t\t\tif ( typeof oldState.normalized !== 'undefined' ) {\n\t\t\t\treturn oldState;\n\t\t\t}\n\n\t\t\t// Adjust\n\t\t\tif ( !oldState.data || (typeof oldState.data !== 'object') ) {\n\t\t\t\toldState.data = {};\n\t\t\t}\n\n\t\t\t// ----------------------------------------------------------------\n\n\t\t\t// Create\n\t\t\tnewState = {};\n\t\t\tnewState.normalized = true;\n\t\t\tnewState.title = oldState.title||'';\n\t\t\tnewState.url = History.getFullUrl(oldState.url?oldState.url:(History.getLocationHref()));\n\t\t\tnewState.hash = History.getShortUrl(newState.url);\n\t\t\tnewState.data = History.cloneObject(oldState.data);\n\n\t\t\t// Fetch ID\n\t\t\tnewState.id = History.getIdByState(newState);\n\n\t\t\t// ----------------------------------------------------------------\n\n\t\t\t// Clean the URL\n\t\t\tnewState.cleanUrl = newState.url.replace(/\\??\\&_suid.*/,'');\n\t\t\tnewState.url = newState.cleanUrl;\n\n\t\t\t// Check to see if we have more than just a url\n\t\t\tdataNotEmpty = !History.isEmptyObject(newState.data);\n\n\t\t\t// Apply\n\t\t\tif ( (newState.title || dataNotEmpty) && History.options.disableSuid !== true ) {\n\t\t\t\t// Add ID to Hash\n\t\t\t\tnewState.hash = History.getShortUrl(newState.url).replace(/\\??\\&_suid.*/,'');\n\t\t\t\tif ( !/\\?/.test(newState.hash) ) {\n\t\t\t\t\tnewState.hash += '?';\n\t\t\t\t}\n\t\t\t\tnewState.hash += '&_suid='+newState.id;\n\t\t\t}\n\n\t\t\t// Create the Hashed URL\n\t\t\tnewState.hashedUrl = History.getFullUrl(newState.hash);\n\n\t\t\t// ----------------------------------------------------------------\n\n\t\t\t// Update the URL if we have a duplicate\n\t\t\tif ( (History.emulated.pushState || History.bugs.safariPoll) && History.hasUrlDuplicate(newState) ) {\n\t\t\t\tnewState.url = newState.hashedUrl;\n\t\t\t}\n\n\t\t\t// ----------------------------------------------------------------\n\n\t\t\t// Return\n\t\t\treturn newState;\n\t\t};\n\n\t\t/**\n\t\t * History.createStateObject(data,title,url)\n\t\t * Creates a object based on the data, title and url state params\n\t\t * @param {object} data\n\t\t * @param {string} title\n\t\t * @param {string} url\n\t\t * @return {object}\n\t\t */\n\t\tHistory.createStateObject = function(data,title,url){\n\t\t\t// Hashify\n\t\t\tvar State = {\n\t\t\t\t'data': data,\n\t\t\t\t'title': title,\n\t\t\t\t'url': url\n\t\t\t};\n\n\t\t\t// Expand the State\n\t\t\tState = History.normalizeState(State);\n\n\t\t\t// Return object\n\t\t\treturn State;\n\t\t};\n\n\t\t/**\n\t\t * History.getStateById(id)\n\t\t * Get a state by it's UID\n\t\t * @param {String} id\n\t\t */\n\t\tHistory.getStateById = function(id){\n\t\t\t// Prepare\n\t\t\tid = String(id);\n\n\t\t\t// Retrieve\n\t\t\tvar State = History.idToState[id] || History.store.idToState[id] || undefined;\n\n\t\t\t// Return State\n\t\t\treturn State;\n\t\t};\n\n\t\t/**\n\t\t * Get a State's String\n\t\t * @param {State} passedState\n\t\t */\n\t\tHistory.getStateString = function(passedState){\n\t\t\t// Prepare\n\t\t\tvar State, cleanedState, str;\n\n\t\t\t// Fetch\n\t\t\tState = History.normalizeState(passedState);\n\n\t\t\t// Clean\n\t\t\tcleanedState = {\n\t\t\t\tdata: State.data,\n\t\t\t\ttitle: passedState.title,\n\t\t\t\turl: passedState.url\n\t\t\t};\n\n\t\t\t// Fetch\n\t\t\tstr = JSON.stringify(cleanedState);\n\n\t\t\t// Return\n\t\t\treturn str;\n\t\t};\n\n\t\t/**\n\t\t * Get a State's ID\n\t\t * @param {State} passedState\n\t\t * @return {String} id\n\t\t */\n\t\tHistory.getStateId = function(passedState){\n\t\t\t// Prepare\n\t\t\tvar State, id;\n\n\t\t\t// Fetch\n\t\t\tState = History.normalizeState(passedState);\n\n\t\t\t// Fetch\n\t\t\tid = State.id;\n\n\t\t\t// Return\n\t\t\treturn id;\n\t\t};\n\n\t\t/**\n\t\t * History.getHashByState(State)\n\t\t * Creates a Hash for the State Object\n\t\t * @param {State} passedState\n\t\t * @return {String} hash\n\t\t */\n\t\tHistory.getHashByState = function(passedState){\n\t\t\t// Prepare\n\t\t\tvar State, hash;\n\n\t\t\t// Fetch\n\t\t\tState = History.normalizeState(passedState);\n\n\t\t\t// Hash\n\t\t\thash = State.hash;\n\n\t\t\t// Return\n\t\t\treturn hash;\n\t\t};\n\n\t\t/**\n\t\t * History.extractId(url_or_hash)\n\t\t * Get a State ID by it's URL or Hash\n\t\t * @param {string} url_or_hash\n\t\t * @return {string} id\n\t\t */\n\t\tHistory.extractId = function ( url_or_hash ) {\n\t\t\t// Prepare\n\t\t\tvar id,parts,url, tmp;\n\n\t\t\t// Extract\n\n\t\t\t// If the URL has a #, use the id from before the #\n\t\t\tif (url_or_hash.indexOf('#') != -1)\n\t\t\t{\n\t\t\t\ttmp = url_or_hash.split(\"#\")[0];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttmp = url_or_hash;\n\t\t\t}\n\n\t\t\tparts = /(.*)\\&_suid=([0-9]+)$/.exec(tmp);\n\t\t\turl = parts ? (parts[1]||url_or_hash) : url_or_hash;\n\t\t\tid = parts ? String(parts[2]||'') : '';\n\n\t\t\t// Return\n\t\t\treturn id||false;\n\t\t};\n\n\t\t/**\n\t\t * History.isTraditionalAnchor\n\t\t * Checks to see if the url is a traditional anchor or not\n\t\t * @param {String} url_or_hash\n\t\t * @return {Boolean}\n\t\t */\n\t\tHistory.isTraditionalAnchor = function(url_or_hash){\n\t\t\t// Check\n\t\t\tvar isTraditional = !(/[\\/\\?\\.]/.test(url_or_hash));\n\n\t\t\t// Return\n\t\t\treturn isTraditional;\n\t\t};\n\n\t\t/**\n\t\t * History.extractState\n\t\t * Get a State by it's URL or Hash\n\t\t * @param {String} url_or_hash\n\t\t * @return {State|null}\n\t\t */\n\t\tHistory.extractState = function(url_or_hash,create){\n\t\t\t// Prepare\n\t\t\tvar State = null, id, url;\n\t\t\tcreate = create||false;\n\n\t\t\t// Fetch SUID\n\t\t\tid = History.extractId(url_or_hash);\n\t\t\tif ( id ) {\n\t\t\t\tState = History.getStateById(id);\n\t\t\t}\n\n\t\t\t// Fetch SUID returned no State\n\t\t\tif ( !State ) {\n\t\t\t\t// Fetch URL\n\t\t\t\turl = History.getFullUrl(url_or_hash);\n\n\t\t\t\t// Check URL\n\t\t\t\tid = History.getIdByUrl(url)||false;\n\t\t\t\tif ( id ) {\n\t\t\t\t\tState = History.getStateById(id);\n\t\t\t\t}\n\n\t\t\t\t// Create State\n\t\t\t\tif ( !State && create && !History.isTraditionalAnchor(url_or_hash) ) {\n\t\t\t\t\tState = History.createStateObject(null,null,url);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Return\n\t\t\treturn State;\n\t\t};\n\n\t\t/**\n\t\t * History.getIdByUrl()\n\t\t * Get a State ID by a State URL\n\t\t */\n\t\tHistory.getIdByUrl = function(url){\n\t\t\t// Fetch\n\t\t\tvar id = History.urlToId[url] || History.store.urlToId[url] || undefined;\n\n\t\t\t// Return\n\t\t\treturn id;\n\t\t};\n\n\t\t/**\n\t\t * History.getLastSavedState()\n\t\t * Get an object containing the data, title and url of the current state\n\t\t * @return {Object} State\n\t\t */\n\t\tHistory.getLastSavedState = function(){\n\t\t\treturn History.savedStates[History.savedStates.length-1]||undefined;\n\t\t};\n\n\t\t/**\n\t\t * History.getLastStoredState()\n\t\t * Get an object containing the data, title and url of the current state\n\t\t * @return {Object} State\n\t\t */\n\t\tHistory.getLastStoredState = function(){\n\t\t\treturn History.storedStates[History.storedStates.length-1]||undefined;\n\t\t};\n\n\t\t/**\n\t\t * History.hasUrlDuplicate\n\t\t * Checks if a Url will have a url conflict\n\t\t * @param {Object} newState\n\t\t * @return {Boolean} hasDuplicate\n\t\t */\n\t\tHistory.hasUrlDuplicate = function(newState) {\n\t\t\t// Prepare\n\t\t\tvar hasDuplicate = false,\n\t\t\t\toldState;\n\n\t\t\t// Fetch\n\t\t\toldState = History.extractState(newState.url);\n\n\t\t\t// Check\n\t\t\thasDuplicate = oldState && oldState.id !== newState.id;\n\n\t\t\t// Return\n\t\t\treturn hasDuplicate;\n\t\t};\n\n\t\t/**\n\t\t * History.storeState\n\t\t * Store a State\n\t\t * @param {Object} newState\n\t\t * @return {Object} newState\n\t\t */\n\t\tHistory.storeState = function(newState){\n\t\t\t// Store the State\n\t\t\tHistory.urlToId[newState.url] = newState.id;\n\n\t\t\t// Push the State\n\t\t\tHistory.storedStates.push(History.cloneObject(newState));\n\n\t\t\t// Return newState\n\t\t\treturn newState;\n\t\t};\n\n\t\t/**\n\t\t * History.isLastSavedState(newState)\n\t\t * Tests to see if the state is the last state\n\t\t * @param {Object} newState\n\t\t * @return {boolean} isLast\n\t\t */\n\t\tHistory.isLastSavedState = function(newState){\n\t\t\t// Prepare\n\t\t\tvar isLast = false,\n\t\t\t\tnewId, oldState, oldId;\n\n\t\t\t// Check\n\t\t\tif ( History.savedStates.length ) {\n\t\t\t\tnewId = newState.id;\n\t\t\t\toldState = History.getLastSavedState();\n\t\t\t\toldId = oldState.id;\n\n\t\t\t\t// Check\n\t\t\t\tisLast = (newId === oldId);\n\t\t\t}\n\n\t\t\t// Return\n\t\t\treturn isLast;\n\t\t};\n\n\t\t/**\n\t\t * History.saveState\n\t\t * Push a State\n\t\t * @param {Object} newState\n\t\t * @return {boolean} changed\n\t\t */\n\t\tHistory.saveState = function(newState){\n\t\t\t// Check Hash\n\t\t\tif ( History.isLastSavedState(newState) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Push the State\n\t\t\tHistory.savedStates.push(History.cloneObject(newState));\n\n\t\t\t// Return true\n\t\t\treturn true;\n\t\t};\n\n\t\t/**\n\t\t * History.getStateByIndex()\n\t\t * Gets a state by the index\n\t\t * @param {integer} index\n\t\t * @return {Object}\n\t\t */\n\t\tHistory.getStateByIndex = function(index){\n\t\t\t// Prepare\n\t\t\tvar State = null;\n\n\t\t\t// Handle\n\t\t\tif ( typeof index === 'undefined' ) {\n\t\t\t\t// Get the last inserted\n\t\t\t\tState = History.savedStates[History.savedStates.length-1];\n\t\t\t}\n\t\t\telse if ( index < 0 ) {\n\t\t\t\t// Get from the end\n\t\t\t\tState = History.savedStates[History.savedStates.length+index];\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Get from the beginning\n\t\t\t\tState = History.savedStates[index];\n\t\t\t}\n\n\t\t\t// Return State\n\t\t\treturn State;\n\t\t};\n\n\t\t/**\n\t\t * History.getCurrentIndex()\n\t\t * Gets the current index\n\t\t * @return (integer)\n\t\t*/\n\t\tHistory.getCurrentIndex = function(){\n\t\t\t// Prepare\n\t\t\tvar index = null;\n\n\t\t\t// No states saved\n\t\t\tif(History.savedStates.length < 1) {\n\t\t\t\tindex = 0;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tindex = History.savedStates.length-1;\n\t\t\t}\n\t\t\treturn index;\n\t\t};\n\n\t\t// ====================================================================\n\t\t// Hash Helpers\n\n\t\t/**\n\t\t * History.getHash()\n\t\t * @param {Location=} location\n\t\t * Gets the current document hash\n\t\t * Note: unlike location.hash, this is guaranteed to return the escaped hash in all browsers\n\t\t * @return {string}\n\t\t */\n\t\tHistory.getHash = function(doc){\n\t\t\tvar url = History.getLocationHref(doc),\n\t\t\t\thash;\n\t\t\thash = History.getHashByUrl(url);\n\t\t\treturn hash;\n\t\t};\n\n\t\t/**\n\t\t * History.unescapeHash()\n\t\t * normalize and Unescape a Hash\n\t\t * @param {String} hash\n\t\t * @return {string}\n\t\t */\n\t\tHistory.unescapeHash = function(hash){\n\t\t\t// Prepare\n\t\t\tvar result = History.normalizeHash(hash);\n\n\t\t\t// Unescape hash\n\t\t\tresult = decodeURIComponent(result);\n\n\t\t\t// Return result\n\t\t\treturn result;\n\t\t};\n\n\t\t/**\n\t\t * History.normalizeHash()\n\t\t * normalize a hash across browsers\n\t\t * @return {string}\n\t\t */\n\t\tHistory.normalizeHash = function(hash){\n\t\t\t// Prepare\n\t\t\tvar result = hash.replace(/[^#]*#/,'').replace(/#.*/, '');\n\n\t\t\t// Return result\n\t\t\treturn result;\n\t\t};\n\n\t\t/**\n\t\t * History.setHash(hash)\n\t\t * Sets the document hash\n\t\t * @param {string} hash\n\t\t * @return {History}\n\t\t */\n\t\tHistory.setHash = function(hash,queue){\n\t\t\t// Prepare\n\t\t\tvar State, pageUrl;\n\n\t\t\t// Handle Queueing\n\t\t\tif ( queue !== false && History.busy() ) {\n\t\t\t\t// Wait + Push to Queue\n\t\t\t\t//History.debug('History.setHash: we must wait', arguments);\n\t\t\t\tHistory.pushQueue({\n\t\t\t\t\tscope: History,\n\t\t\t\t\tcallback: History.setHash,\n\t\t\t\t\targs: arguments,\n\t\t\t\t\tqueue: queue\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Log\n\t\t\t//History.debug('History.setHash: called',hash);\n\n\t\t\t// Make Busy + Continue\n\t\t\tHistory.busy(true);\n\n\t\t\t// Check if hash is a state\n\t\t\tState = History.extractState(hash,true);\n\t\t\tif ( State && !History.emulated.pushState ) {\n\t\t\t\t// Hash is a state so skip the setHash\n\t\t\t\t//History.debug('History.setHash: Hash is a state so skipping the hash set with a direct pushState call',arguments);\n\n\t\t\t\t// PushState\n\t\t\t\tHistory.pushState(State.data,State.title,State.url,false);\n\t\t\t}\n\t\t\telse if ( History.getHash() !== hash ) {\n\t\t\t\t// Hash is a proper hash, so apply it\n\n\t\t\t\t// Handle browser bugs\n\t\t\t\tif ( History.bugs.setHash ) {\n\t\t\t\t\t// Fix Safari Bug https://bugs.webkit.org/show_bug.cgi?id=56249\n\n\t\t\t\t\t// Fetch the base page\n\t\t\t\t\tpageUrl = History.getPageUrl();\n\n\t\t\t\t\t// Safari hash apply\n\t\t\t\t\tHistory.pushState(null,null,pageUrl+'#'+hash,false);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// Normal hash apply\n\t\t\t\t\tdocument.location.hash = hash;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Chain\n\t\t\treturn History;\n\t\t};\n\n\t\t/**\n\t\t * History.escape()\n\t\t * normalize and Escape a Hash\n\t\t * @return {string}\n\t\t */\n\t\tHistory.escapeHash = function(hash){\n\t\t\t// Prepare\n\t\t\tvar result = History.normalizeHash(hash);\n\n\t\t\t// Escape hash\n\t\t\tresult = window.encodeURIComponent(result);\n\n\t\t\t// IE6 Escape Bug\n\t\t\tif ( !History.bugs.hashEscape ) {\n\t\t\t\t// Restore common parts\n\t\t\t\tresult = result\n\t\t\t\t\t.replace(/\\%21/g,'!')\n\t\t\t\t\t.replace(/\\%26/g,'&')\n\t\t\t\t\t.replace(/\\%3D/g,'=')\n\t\t\t\t\t.replace(/\\%3F/g,'?');\n\t\t\t}\n\n\t\t\t// Return result\n\t\t\treturn result;\n\t\t};\n\n\t\t/**\n\t\t * History.getHashByUrl(url)\n\t\t * Extracts the Hash from a URL\n\t\t * @param {string} url\n\t\t * @return {string} url\n\t\t */\n\t\tHistory.getHashByUrl = function(url){\n\t\t\t// Extract the hash\n\t\t\tvar hash = String(url)\n\t\t\t\t.replace(/([^#]*)#?([^#]*)#?(.*)/, '$2')\n\t\t\t\t;\n\n\t\t\t// Unescape hash\n\t\t\thash = History.unescapeHash(hash);\n\n\t\t\t// Return hash\n\t\t\treturn hash;\n\t\t};\n\n\t\t/**\n\t\t * History.setTitle(title)\n\t\t * Applies the title to the document\n\t\t * @param {State} newState\n\t\t * @return {Boolean}\n\t\t */\n\t\tHistory.setTitle = function(newState){\n\t\t\t// Prepare\n\t\t\tvar title = newState.title,\n\t\t\t\tfirstState;\n\n\t\t\t// Initial\n\t\t\tif ( !title ) {\n\t\t\t\tfirstState = History.getStateByIndex(0);\n\t\t\t\tif ( firstState && firstState.url === newState.url ) {\n\t\t\t\t\ttitle = firstState.title||History.options.initialTitle;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Apply\n\t\t\ttry {\n\t\t\t\tdocument.getElementsByTagName('title')[0].innerHTML = title.replace('<','&lt;').replace('>','&gt;').replace(' & ',' &amp; ');\n\t\t\t}\n\t\t\tcatch ( Exception ) { }\n\t\t\tdocument.title = title;\n\n\t\t\t// Chain\n\t\t\treturn History;\n\t\t};\n\n\n\t\t// ====================================================================\n\t\t// Queueing\n\n\t\t/**\n\t\t * History.queues\n\t\t * The list of queues to use\n\t\t * First In, First Out\n\t\t */\n\t\tHistory.queues = [];\n\n\t\t/**\n\t\t * History.busy(value)\n\t\t * @param {boolean} value [optional]\n\t\t * @return {boolean} busy\n\t\t */\n\t\tHistory.busy = function(value){\n\t\t\t// Apply\n\t\t\tif ( typeof value !== 'undefined' ) {\n\t\t\t\t//History.debug('History.busy: changing ['+(History.busy.flag||false)+'] to ['+(value||false)+']', History.queues.length);\n\t\t\t\tHistory.busy.flag = value;\n\t\t\t}\n\t\t\t// Default\n\t\t\telse if ( typeof History.busy.flag === 'undefined' ) {\n\t\t\t\tHistory.busy.flag = false;\n\t\t\t}\n\n\t\t\t// Queue\n\t\t\tif ( !History.busy.flag ) {\n\t\t\t\t// Execute the next item in the queue\n\t\t\t\tclearTimeout(History.busy.timeout);\n\t\t\t\tvar fireNext = function(){\n\t\t\t\t\tvar i, queue, item;\n\t\t\t\t\tif ( History.busy.flag ) return;\n\t\t\t\t\tfor ( i=History.queues.length-1; i >= 0; --i ) {\n\t\t\t\t\t\tqueue = History.queues[i];\n\t\t\t\t\t\tif ( queue.length === 0 ) continue;\n\t\t\t\t\t\titem = queue.shift();\n\t\t\t\t\t\tHistory.fireQueueItem(item);\n\t\t\t\t\t\tHistory.busy.timeout = setTimeout(fireNext,History.options.busyDelay);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tHistory.busy.timeout = setTimeout(fireNext,History.options.busyDelay);\n\t\t\t}\n\n\t\t\t// Return\n\t\t\treturn History.busy.flag;\n\t\t};\n\n\t\t/**\n\t\t * History.busy.flag\n\t\t */\n\t\tHistory.busy.flag = false;\n\n\t\t/**\n\t\t * History.fireQueueItem(item)\n\t\t * Fire a Queue Item\n\t\t * @param {Object} item\n\t\t * @return {Mixed} result\n\t\t */\n\t\tHistory.fireQueueItem = function(item){\n\t\t\treturn item.callback.apply(item.scope||History,item.args||[]);\n\t\t};\n\n\t\t/**\n\t\t * History.pushQueue(callback,args)\n\t\t * Add an item to the queue\n\t\t * @param {Object} item [scope,callback,args,queue]\n\t\t */\n\t\tHistory.pushQueue = function(item){\n\t\t\t// Prepare the queue\n\t\t\tHistory.queues[item.queue||0] = History.queues[item.queue||0]||[];\n\n\t\t\t// Add to the queue\n\t\t\tHistory.queues[item.queue||0].push(item);\n\n\t\t\t// Chain\n\t\t\treturn History;\n\t\t};\n\n\t\t/**\n\t\t * History.queue (item,queue), (func,queue), (func), (item)\n\t\t * Either firs the item now if not busy, or adds it to the queue\n\t\t */\n\t\tHistory.queue = function(item,queue){\n\t\t\t// Prepare\n\t\t\tif ( typeof item === 'function' ) {\n\t\t\t\titem = {\n\t\t\t\t\tcallback: item\n\t\t\t\t};\n\t\t\t}\n\t\t\tif ( typeof queue !== 'undefined' ) {\n\t\t\t\titem.queue = queue;\n\t\t\t}\n\n\t\t\t// Handle\n\t\t\tif ( History.busy() ) {\n\t\t\t\tHistory.pushQueue(item);\n\t\t\t} else {\n\t\t\t\tHistory.fireQueueItem(item);\n\t\t\t}\n\n\t\t\t// Chain\n\t\t\treturn History;\n\t\t};\n\n\t\t/**\n\t\t * History.clearQueue()\n\t\t * Clears the Queue\n\t\t */\n\t\tHistory.clearQueue = function(){\n\t\t\tHistory.busy.flag = false;\n\t\t\tHistory.queues = [];\n\t\t\treturn History;\n\t\t};\n\n\n\t\t// ====================================================================\n\t\t// IE Bug Fix\n\n\t\t/**\n\t\t * History.stateChanged\n\t\t * States whether or not the state has changed since the last double check was initialised\n\t\t */\n\t\tHistory.stateChanged = false;\n\n\t\t/**\n\t\t * History.doubleChecker\n\t\t * Contains the timeout used for the double checks\n\t\t */\n\t\tHistory.doubleChecker = false;\n\n\t\t/**\n\t\t * History.doubleCheckComplete()\n\t\t * Complete a double check\n\t\t * @return {History}\n\t\t */\n\t\tHistory.doubleCheckComplete = function(){\n\t\t\t// Update\n\t\t\tHistory.stateChanged = true;\n\n\t\t\t// Clear\n\t\t\tHistory.doubleCheckClear();\n\n\t\t\t// Chain\n\t\t\treturn History;\n\t\t};\n\n\t\t/**\n\t\t * History.doubleCheckClear()\n\t\t * Clear a double check\n\t\t * @return {History}\n\t\t */\n\t\tHistory.doubleCheckClear = function(){\n\t\t\t// Clear\n\t\t\tif ( History.doubleChecker ) {\n\t\t\t\tclearTimeout(History.doubleChecker);\n\t\t\t\tHistory.doubleChecker = false;\n\t\t\t}\n\n\t\t\t// Chain\n\t\t\treturn History;\n\t\t};\n\n\t\t/**\n\t\t * History.doubleCheck()\n\t\t * Create a double check\n\t\t * @return {History}\n\t\t */\n\t\tHistory.doubleCheck = function(tryAgain){\n\t\t\t// Reset\n\t\t\tHistory.stateChanged = false;\n\t\t\tHistory.doubleCheckClear();\n\n\t\t\t// Fix IE6,IE7 bug where calling history.back or history.forward does not actually change the hash (whereas doing it manually does)\n\t\t\t// Fix Safari 5 bug where sometimes the state does not change: https://bugs.webkit.org/show_bug.cgi?id=42940\n\t\t\tif ( History.bugs.ieDoubleCheck ) {\n\t\t\t\t// Apply Check\n\t\t\t\tHistory.doubleChecker = setTimeout(\n\t\t\t\t\tfunction(){\n\t\t\t\t\t\tHistory.doubleCheckClear();\n\t\t\t\t\t\tif ( !History.stateChanged ) {\n\t\t\t\t\t\t\t//History.debug('History.doubleCheck: State has not yet changed, trying again', arguments);\n\t\t\t\t\t\t\t// Re-Attempt\n\t\t\t\t\t\t\ttryAgain();\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},\n\t\t\t\t\tHistory.options.doubleCheckInterval\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Chain\n\t\t\treturn History;\n\t\t};\n\n\n\t\t// ====================================================================\n\t\t// Safari Bug Fix\n\n\t\t/**\n\t\t * History.safariStatePoll()\n\t\t * Poll the current state\n\t\t * @return {History}\n\t\t */\n\t\tHistory.safariStatePoll = function(){\n\t\t\t// Poll the URL\n\n\t\t\t// Get the Last State which has the new URL\n\t\t\tvar\n\t\t\t\turlState = History.extractState(History.getLocationHref()),\n\t\t\t\tnewState;\n\n\t\t\t// Check for a difference\n\t\t\tif ( !History.isLastSavedState(urlState) ) {\n\t\t\t\tnewState = urlState;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Check if we have a state with that url\n\t\t\t// If not create it\n\t\t\tif ( !newState ) {\n\t\t\t\t//History.debug('History.safariStatePoll: new');\n\t\t\t\tnewState = History.createStateObject();\n\t\t\t}\n\n\t\t\t// Apply the New State\n\t\t\t//History.debug('History.safariStatePoll: trigger');\n\t\t\tHistory.Adapter.trigger(window,'popstate');\n\n\t\t\t// Chain\n\t\t\treturn History;\n\t\t};\n\n\n\t\t// ====================================================================\n\t\t// State Aliases\n\n\t\t/**\n\t\t * History.back(queue)\n\t\t * Send the browser history back one item\n\t\t * @param {Integer} queue [optional]\n\t\t */\n\t\tHistory.back = function(queue){\n\t\t\t//History.debug('History.back: called', arguments);\n\n\t\t\t// Handle Queueing\n\t\t\tif ( queue !== false && History.busy() ) {\n\t\t\t\t// Wait + Push to Queue\n\t\t\t\t//History.debug('History.back: we must wait', arguments);\n\t\t\t\tHistory.pushQueue({\n\t\t\t\t\tscope: History,\n\t\t\t\t\tcallback: History.back,\n\t\t\t\t\targs: arguments,\n\t\t\t\t\tqueue: queue\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Make Busy + Continue\n\t\t\tHistory.busy(true);\n\n\t\t\t// Fix certain browser bugs that prevent the state from changing\n\t\t\tHistory.doubleCheck(function(){\n\t\t\t\tHistory.back(false);\n\t\t\t});\n\n\t\t\t// Go back\n\t\t\thistory.go(-1);\n\n\t\t\t// End back closure\n\t\t\treturn true;\n\t\t};\n\n\t\t/**\n\t\t * History.forward(queue)\n\t\t * Send the browser history forward one item\n\t\t * @param {Integer} queue [optional]\n\t\t */\n\t\tHistory.forward = function(queue){\n\t\t\t//History.debug('History.forward: called', arguments);\n\n\t\t\t// Handle Queueing\n\t\t\tif ( queue !== false && History.busy() ) {\n\t\t\t\t// Wait + Push to Queue\n\t\t\t\t//History.debug('History.forward: we must wait', arguments);\n\t\t\t\tHistory.pushQueue({\n\t\t\t\t\tscope: History,\n\t\t\t\t\tcallback: History.forward,\n\t\t\t\t\targs: arguments,\n\t\t\t\t\tqueue: queue\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Make Busy + Continue\n\t\t\tHistory.busy(true);\n\n\t\t\t// Fix certain browser bugs that prevent the state from changing\n\t\t\tHistory.doubleCheck(function(){\n\t\t\t\tHistory.forward(false);\n\t\t\t});\n\n\t\t\t// Go forward\n\t\t\thistory.go(1);\n\n\t\t\t// End forward closure\n\t\t\treturn true;\n\t\t};\n\n\t\t/**\n\t\t * History.go(index,queue)\n\t\t * Send the browser history back or forward index times\n\t\t * @param {Integer} queue [optional]\n\t\t */\n\t\tHistory.go = function(index,queue){\n\t\t\t//History.debug('History.go: called', arguments);\n\n\t\t\t// Prepare\n\t\t\tvar i;\n\n\t\t\t// Handle\n\t\t\tif ( index > 0 ) {\n\t\t\t\t// Forward\n\t\t\t\tfor ( i=1; i<=index; ++i ) {\n\t\t\t\t\tHistory.forward(queue);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if ( index < 0 ) {\n\t\t\t\t// Backward\n\t\t\t\tfor ( i=-1; i>=index; --i ) {\n\t\t\t\t\tHistory.back(queue);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthrow new Error('History.go: History.go requires a positive or negative integer passed.');\n\t\t\t}\n\n\t\t\t// Chain\n\t\t\treturn History;\n\t\t};\n\n\n\t\t// ====================================================================\n\t\t// HTML5 State Support\n\n\t\t// Non-Native pushState Implementation\n\t\tif ( History.emulated.pushState ) {\n\t\t\t/*\n\t\t\t * Provide Skeleton for HTML4 Browsers\n\t\t\t */\n\n\t\t\t// Prepare\n\t\t\tvar emptyFunction = function(){};\n\t\t\tHistory.pushState = History.pushState||emptyFunction;\n\t\t\tHistory.replaceState = History.replaceState||emptyFunction;\n\t\t} // History.emulated.pushState\n\n\t\t// Native pushState Implementation\n\t\telse {\n\t\t\t/*\n\t\t\t * Use native HTML5 History API Implementation\n\t\t\t */\n\n\t\t\t/**\n\t\t\t * History.onPopState(event,extra)\n\t\t\t * Refresh the Current State\n\t\t\t */\n\t\t\tHistory.onPopState = function(event,extra){\n\t\t\t\t// Prepare\n\t\t\t\tvar stateId = false, newState = false, currentHash, currentState;\n\n\t\t\t\t// Reset the double check\n\t\t\t\tHistory.doubleCheckComplete();\n\n\t\t\t\t// Check for a Hash, and handle apporiatly\n\t\t\t\tcurrentHash = History.getHash();\n\t\t\t\tif ( currentHash ) {\n\t\t\t\t\t// Expand Hash\n\t\t\t\t\tcurrentState = History.extractState(currentHash||History.getLocationHref(),true);\n\t\t\t\t\tif ( currentState ) {\n\t\t\t\t\t\t// We were able to parse it, it must be a State!\n\t\t\t\t\t\t// Let's forward to replaceState\n\t\t\t\t\t\t//History.debug('History.onPopState: state anchor', currentHash, currentState);\n\t\t\t\t\t\tHistory.replaceState(currentState.data, currentState.title, currentState.url, false);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Traditional Anchor\n\t\t\t\t\t\t//History.debug('History.onPopState: traditional anchor', currentHash);\n\t\t\t\t\t\tHistory.Adapter.trigger(window,'anchorchange');\n\t\t\t\t\t\tHistory.busy(false);\n\t\t\t\t\t}\n\n\t\t\t\t\t// We don't care for hashes\n\t\t\t\t\tHistory.expectedStateId = false;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// Ensure\n\t\t\t\tstateId = History.Adapter.extractEventData('state',event,extra) || false;\n\n\t\t\t\t// Fetch State\n\t\t\t\tif ( stateId ) {\n\t\t\t\t\t// Vanilla: Back/forward button was used\n\t\t\t\t\tnewState = History.getStateById(stateId);\n\t\t\t\t}\n\t\t\t\telse if ( History.expectedStateId ) {\n\t\t\t\t\t// Vanilla: A new state was pushed, and popstate was called manually\n\t\t\t\t\tnewState = History.getStateById(History.expectedStateId);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// Initial State\n\t\t\t\t\tnewState = History.extractState(History.getLocationHref());\n\t\t\t\t}\n\n\t\t\t\t// The State did not exist in our store\n\t\t\t\tif ( !newState ) {\n\t\t\t\t\t// Regenerate the State\n\t\t\t\t\tnewState = History.createStateObject(null,null,History.getLocationHref());\n\t\t\t\t}\n\n\t\t\t\t// Clean\n\t\t\t\tHistory.expectedStateId = false;\n\n\t\t\t\t// Check if we are the same state\n\t\t\t\tif ( History.isLastSavedState(newState) ) {\n\t\t\t\t\t// There has been no change (just the page's hash has finally propagated)\n\t\t\t\t\t//History.debug('History.onPopState: no change', newState, History.savedStates);\n\t\t\t\t\tHistory.busy(false);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// Store the State\n\t\t\t\tHistory.storeState(newState);\n\t\t\t\tHistory.saveState(newState);\n\n\t\t\t\t// Force update of the title\n\t\t\t\tHistory.setTitle(newState);\n\n\t\t\t\t// Fire Our Event\n\t\t\t\tHistory.Adapter.trigger(window,'statechange');\n\t\t\t\tHistory.busy(false);\n\n\t\t\t\t// Return true\n\t\t\t\treturn true;\n\t\t\t};\n\t\t\tHistory.Adapter.bind(window,'popstate',History.onPopState);\n\n\t\t\t/**\n\t\t\t * History.pushState(data,title,url)\n\t\t\t * Add a new State to the history object, become it, and trigger onpopstate\n\t\t\t * We have to trigger for HTML4 compatibility\n\t\t\t * @param {object} data\n\t\t\t * @param {string} title\n\t\t\t * @param {string} url\n\t\t\t * @return {true}\n\t\t\t */\n\t\t\tHistory.pushState = function(data,title,url,queue){\n\t\t\t\t//History.debug('History.pushState: called', arguments);\n\n\t\t\t\t// Check the State\n\t\t\t\tif ( History.getHashByUrl(url) && History.emulated.pushState ) {\n\t\t\t\t\tthrow new Error('History.js does not support states with fragement-identifiers (hashes/anchors).');\n\t\t\t\t}\n\n\t\t\t\t// Handle Queueing\n\t\t\t\tif ( queue !== false && History.busy() ) {\n\t\t\t\t\t// Wait + Push to Queue\n\t\t\t\t\t//History.debug('History.pushState: we must wait', arguments);\n\t\t\t\t\tHistory.pushQueue({\n\t\t\t\t\t\tscope: History,\n\t\t\t\t\t\tcallback: History.pushState,\n\t\t\t\t\t\targs: arguments,\n\t\t\t\t\t\tqueue: queue\n\t\t\t\t\t});\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// Make Busy + Continue\n\t\t\t\tHistory.busy(true);\n\n\t\t\t\t// Create the newState\n\t\t\t\tvar newState = History.createStateObject(data,title,url);\n\n\t\t\t\t// Check it\n\t\t\t\tif ( History.isLastSavedState(newState) ) {\n\t\t\t\t\t// Won't be a change\n\t\t\t\t\tHistory.busy(false);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// Store the newState\n\t\t\t\t\tHistory.storeState(newState);\n\t\t\t\t\tHistory.expectedStateId = newState.id;\n\n\t\t\t\t\t// Push the newState\n\t\t\t\t\thistory.pushState(newState.id,newState.title,newState.url);\n\n\t\t\t\t\t// Fire HTML5 Event\n\t\t\t\t\tHistory.Adapter.trigger(window,'popstate');\n\t\t\t\t}\n\n\t\t\t\t// End pushState closure\n\t\t\t\treturn true;\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * History.replaceState(data,title,url)\n\t\t\t * Replace the State and trigger onpopstate\n\t\t\t * We have to trigger for HTML4 compatibility\n\t\t\t * @param {object} data\n\t\t\t * @param {string} title\n\t\t\t * @param {string} url\n\t\t\t * @return {true}\n\t\t\t */\n\t\t\tHistory.replaceState = function(data,title,url,queue){\n\t\t\t\t//History.debug('History.replaceState: called', arguments);\n\n\t\t\t\t// Check the State\n\t\t\t\tif ( History.getHashByUrl(url) && History.emulated.pushState ) {\n\t\t\t\t\tthrow new Error('History.js does not support states with fragement-identifiers (hashes/anchors).');\n\t\t\t\t}\n\n\t\t\t\t// Handle Queueing\n\t\t\t\tif ( queue !== false && History.busy() ) {\n\t\t\t\t\t// Wait + Push to Queue\n\t\t\t\t\t//History.debug('History.replaceState: we must wait', arguments);\n\t\t\t\t\tHistory.pushQueue({\n\t\t\t\t\t\tscope: History,\n\t\t\t\t\t\tcallback: History.replaceState,\n\t\t\t\t\t\targs: arguments,\n\t\t\t\t\t\tqueue: queue\n\t\t\t\t\t});\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// Make Busy + Continue\n\t\t\t\tHistory.busy(true);\n\n\t\t\t\t// Create the newState\n\t\t\t\tvar newState = History.createStateObject(data,title,url);\n\n\t\t\t\t// Check it\n\t\t\t\tif ( History.isLastSavedState(newState) ) {\n\t\t\t\t\t// Won't be a change\n\t\t\t\t\tHistory.busy(false);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// Store the newState\n\t\t\t\t\tHistory.storeState(newState);\n\t\t\t\t\tHistory.expectedStateId = newState.id;\n\n\t\t\t\t\t// Push the newState\n\t\t\t\t\thistory.replaceState(newState.id,newState.title,newState.url);\n\n\t\t\t\t\t// Fire HTML5 Event\n\t\t\t\t\tHistory.Adapter.trigger(window,'popstate');\n\t\t\t\t}\n\n\t\t\t\t// End replaceState closure\n\t\t\t\treturn true;\n\t\t\t};\n\n\t\t} // !History.emulated.pushState\n\n\n\t\t// ====================================================================\n\t\t// Initialise\n\n\t\t/**\n\t\t * Load the Store\n\t\t */\n\t\tif ( sessionStorage ) {\n\t\t\t// Fetch\n\t\t\ttry {\n\t\t\t\tHistory.store = JSON.parse(sessionStorage.getItem('History.store'))||{};\n\t\t\t}\n\t\t\tcatch ( err ) {\n\t\t\t\tHistory.store = {};\n\t\t\t}\n\n\t\t\t// Normalize\n\t\t\tHistory.normalizeStore();\n\t\t}\n\t\telse {\n\t\t\t// Default Load\n\t\t\tHistory.store = {};\n\t\t\tHistory.normalizeStore();\n\t\t}\n\n\t\t/**\n\t\t * Clear Intervals on exit to prevent memory leaks\n\t\t */\n\t\tHistory.Adapter.bind(window,\"unload\",History.clearAllIntervals);\n\n\t\t/**\n\t\t * Create the initial State\n\t\t */\n\t\tHistory.saveState(History.storeState(History.extractState(History.getLocationHref(),true)));\n\n\t\t/**\n\t\t * Bind for Saving Store\n\t\t */\n\t\tif ( sessionStorage ) {\n\t\t\t// When the page is closed\n\t\t\tHistory.onUnload = function(){\n\t\t\t\t// Prepare\n\t\t\t\tvar\tcurrentStore, item, currentStoreString;\n\n\t\t\t\t// Fetch\n\t\t\t\ttry {\n\t\t\t\t\tcurrentStore = JSON.parse(sessionStorage.getItem('History.store'))||{};\n\t\t\t\t}\n\t\t\t\tcatch ( err ) {\n\t\t\t\t\tcurrentStore = {};\n\t\t\t\t}\n\n\t\t\t\t// Ensure\n\t\t\t\tcurrentStore.idToState = currentStore.idToState || {};\n\t\t\t\tcurrentStore.urlToId = currentStore.urlToId || {};\n\t\t\t\tcurrentStore.stateToId = currentStore.stateToId || {};\n\n\t\t\t\t// Sync\n\t\t\t\tfor ( item in History.idToState ) {\n\t\t\t\t\tif ( !History.idToState.hasOwnProperty(item) ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tcurrentStore.idToState[item] = History.idToState[item];\n\t\t\t\t}\n\t\t\t\tfor ( item in History.urlToId ) {\n\t\t\t\t\tif ( !History.urlToId.hasOwnProperty(item) ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tcurrentStore.urlToId[item] = History.urlToId[item];\n\t\t\t\t}\n\t\t\t\tfor ( item in History.stateToId ) {\n\t\t\t\t\tif ( !History.stateToId.hasOwnProperty(item) ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tcurrentStore.stateToId[item] = History.stateToId[item];\n\t\t\t\t}\n\n\t\t\t\t// Update\n\t\t\t\tHistory.store = currentStore;\n\t\t\t\tHistory.normalizeStore();\n\n\t\t\t\t// In Safari, going into Private Browsing mode causes the\n\t\t\t\t// Session Storage object to still exist but if you try and use\n\t\t\t\t// or set any property/function of it it throws the exception\n\t\t\t\t// \"QUOTA_EXCEEDED_ERR: DOM Exception 22: An attempt was made to\n\t\t\t\t// add something to storage that exceeded the quota.\" infinitely\n\t\t\t\t// every second.\n\t\t\t\tcurrentStoreString = JSON.stringify(currentStore);\n\t\t\t\ttry {\n\t\t\t\t\t// Store\n\t\t\t\t\tsessionStorage.setItem('History.store', currentStoreString);\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\tif (e.code === DOMException.QUOTA_EXCEEDED_ERR) {\n\t\t\t\t\t\tif (sessionStorage.length) {\n\t\t\t\t\t\t\t// Workaround for a bug seen on iPads. Sometimes the quota exceeded error comes up and simply\n\t\t\t\t\t\t\t// removing/resetting the storage can work.\n\t\t\t\t\t\t\tsessionStorage.removeItem('History.store');\n\t\t\t\t\t\t\tsessionStorage.setItem('History.store', currentStoreString);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Otherwise, we're probably private browsing in Safari, so we'll ignore the exception.\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow e;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// For Internet Explorer\n\t\t\tHistory.intervalList.push(setInterval(History.onUnload,History.options.storeInterval));\n\n\t\t\t// For Other Browsers\n\t\t\tHistory.Adapter.bind(window,'beforeunload',History.onUnload);\n\t\t\tHistory.Adapter.bind(window,'unload',History.onUnload);\n\n\t\t\t// Both are enabled for consistency\n\t\t}\n\n\t\t// Non-Native pushState Implementation\n\t\tif ( !History.emulated.pushState ) {\n\t\t\t// Be aware, the following is only for native pushState implementations\n\t\t\t// If you are wanting to include something for all browsers\n\t\t\t// Then include it above this if block\n\n\t\t\t/**\n\t\t\t * Setup Safari Fix\n\t\t\t */\n\t\t\tif ( History.bugs.safariPoll ) {\n\t\t\t\tHistory.intervalList.push(setInterval(History.safariStatePoll, History.options.safariPollInterval));\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Ensure Cross Browser Compatibility\n\t\t\t */\n\t\t\tif ( navigator.vendor === 'Apple Computer, Inc.' || (navigator.appCodeName||'') === 'Mozilla' ) {\n\t\t\t\t/**\n\t\t\t\t * Fix Safari HashChange Issue\n\t\t\t\t */\n\n\t\t\t\t// Setup Alias\n\t\t\t\tHistory.Adapter.bind(window,'hashchange',function(){\n\t\t\t\t\tHistory.Adapter.trigger(window,'popstate');\n\t\t\t\t});\n\n\t\t\t\t// Initialise Alias\n\t\t\t\tif ( History.getHash() ) {\n\t\t\t\t\tHistory.Adapter.onDomLoad(function(){\n\t\t\t\t\t\tHistory.Adapter.trigger(window,'hashchange');\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t} // !History.emulated.pushState\n\n\n\t}; // History.initCore\n\n\t// Try to Initialise History\n\tif (!History.options || !History.options.delayInit) {\n\t\tHistory.init();\n\t}\n\n})(window);\n"]}